if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ra,Error);ra.prototype.name="CustomError";var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ua(a,b){return-1!=a.indexOf(b)}
function va(a,b){var c=0;a=ta(String(a)).split(".");b=ta(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=wa(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||wa(0==f[2].length,0==h[2].length)||wa(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function wa(a,b){return a<b?-1:a>b?1:0};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a,b,c){this.pg=c;this.Of=a;this.Kg=b;this.qd=0;this.fd=null}Fa.prototype.get=function(){var a;0<this.qd?(this.qd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Of();return a};Fa.prototype.put=function(a){this.Kg(a);this.qd<this.pg&&(this.qd++,a.next=this.fd,this.fd=a)};var Ga;a:{var Ha=da.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return ua(Ga,a)};function Ja(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};function Ka(){return t("Safari")&&!(La()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function La(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ma(a){da.setTimeout(function(){throw a;},0)}var Oa;
function Pa(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Fe;c.Fe=null;a()}};return function(a){d.next={Fe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Qa(){this.Bd=this.oc=null}var Sa=new Fa(function(){return new Ra},function(a){a.reset()},100);Qa.prototype.add=function(a,b){var c=Sa.get();c.set(a,b);this.Bd?this.Bd.next=c:this.oc=c;this.Bd=c};Qa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Bd=null),a.next=null);return a};function Ra(){this.next=this.scope=this.Td=null}Ra.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Ra.prototype.reset=function(){this.next=this.scope=this.Td=null};function Ta(a,b){Ua||Va();Wa||(Ua(),Wa=!0);Xa.add(a,b)}var Ua;function Va(){if(-1!=String(da.Promise).indexOf("[native code]")){var a=da.Promise.resolve(void 0);Ua=function(){a.then(Ya)}}else Ua=function(){var a=Ya;!ja(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Oa||(Oa=Pa()),Oa(a)):da.setImmediate(a)}}var Wa=!1,Xa=new Qa;function Ya(){for(var a;a=Xa.remove();){try{a.Td.call(a.scope)}catch(b){Ma(b)}Sa.put(a)}Wa=!1};function u(a,b){this.Ta=0;this.nf=void 0;this.Vc=this.dc=this.D=null;this.ed=this.Rd=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Za(c,2,a)},function(a){Za(c,3,a)})}catch(d){Za(this,3,d)}}function $a(){this.next=this.context=this.ic=this.Ic=this.child=null;this.Ed=!1}$a.prototype.reset=function(){this.context=this.ic=this.Ic=this.child=null;this.Ed=!1};var ab=new Fa(function(){return new $a},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Ic=a;d.ic=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Za(b,2,a);return b}function cb(a){return new u(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Ta(qa(b,a))}function fb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],db(p,qa(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new gb(c,a,b)}
u.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ve=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.dc||2!=a.Ta&&3!=a.Ta||jb(a);a.Vc?a.Vc.next=b:a.dc=b;a.Vc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new u(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.ic=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof kb?h(b):a(e)}catch(L){h(L)}}:h});e.child.D=a;ib(a,e);return e.child}u.prototype.Qg=function(a){this.Ta=0;Za(this,2,a)};u.prototype.Rg=function(a){this.Ta=0;Za(this,3,a)};
function Za(a,b,c){0==a.Ta&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,eb(c,a.Qg,a.Rg,a)||(a.nf=c,a.Ta=b,a.D=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof u)return ib(a,bb(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function jb(a){a.Rd||(a.Rd=!0,Ta(a.Vf,a))}function nb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Vc=null);return b}
u.prototype.Vf=function(){for(var a;a=nb(this);){var b=this.Ta,c=this.nf;if(3==b&&a.ic&&!a.Ed){var d;for(d=this;d&&d.ed;d=d.D)d.ed=!1}if(a.child)a.child.D=null,ob(a,b,c);else try{a.Ed?a.Ic.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Rd=!1};function ob(a,b,c){2==b?a.Ic.call(a.context,c):a.ic&&a.ic.call(a.context,c)}function lb(a,b){a.ed=!0;Ta(function(){a.ed&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}r(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);for(var L=[],l=e,p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function rb(a){return Aa(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.pc=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.pc)return a.pc(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Ab(a,b){this.l={};this.a=[];this.Ua=this.Eb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Ab.prototype;m.zc=g("Eb");m.qa=function(){Bb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Eb(a){Bb(a);return a.a.concat()}m.Pa=function(a){return Fb(this.l,a)};m.jd=function(){return 0==this.Eb};
m.clear=function(){this.l={};this.Ua=this.Eb=this.a.length=0};m.remove=function(a){return Fb(this.l,a)?(delete this.l[a],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&Bb(this),!0):!1};function Bb(a){if(a.Eb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Fb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Eb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Fb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Fb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Fb(this.l,a)||(this.Eb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof Ab)b=Eb(a),a=a.qa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ja(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Eb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Ab(this)};
m.pc=function(a){Bb(this);var b=0,c=this.Ua,d=this,e=new wb;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw vb;var e=d.a[b++];return a?e:d.l[e]};return e};function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Gb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Hb(a,b){var c=Ib;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Jb=t("Opera"),Kb=t("Trident")||t("MSIE"),Lb=t("Edge"),Mb=t("Gecko")&&!(ua(Ga.toLowerCase(),"webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Nb=ua(Ga.toLowerCase(),"webkit")&&!t("Edge"),Ob=t("Macintosh"),Pb=t("Windows"),Qb=t("Android"),Rb=Gb(),Sb=t("iPad"),Tb=t("iPod"),Ub;
a:{var Vb="",Wb=function(){var a=Ga;if(Mb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Lb)return/Edge\/([\d\.]+)/.exec(a);if(Kb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Nb)return/WebKit\/(\S+)/.exec(a);if(Jb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Wb&&(Vb=Wb?Wb[1]:"");if(Kb){var Xb,Yb=da.document;Xb=Yb?Yb.documentMode:void 0;if(null!=Xb&&Xb>parseFloat(Vb)){Ub=String(Xb);break a}}Ub=Vb}var Zb=Ub,Ib={};function $b(a){return Hb(a,function(){return 0<=va(Zb,a)})};var ac=function(){var a;return Pb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(Ga))?a[1]:"0"):Ob?(a=/10[_.][0-9_.]+/,(a=a.exec(Ga))?a[0].replace(/_/g,"."):"10"):Qb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ga))?a[1]:""):Rb||Sb||Tb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ga))?a[1].replace(/_/g,"."):""):""}();var bc=Gb()||t("iPod"),cc=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function dc(){var a;!(a=Ka()&&!$b(10))&&(a=cc||bc)&&(a=!(0<=va(ac,10)));this.ae=a;this.fg=!(this.ae||Kb&&!$b(10));!Kb||$b(11);this.Ug=La()||Ka();this.ug=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.ae;this.vg=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.ae}var ec;function fc(){n(ec)||(ec=new dc);return ec};function x(){this.l=new Ab;Object.defineProperty(this,"size",{get:function(){return this.l.zc()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Pa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var gc=fc().ug;function y(){return gc?new window.Map:new x}function hc(a){if(a instanceof x)return Eb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ic(a,b){this.sa=a;this.m=b||this.Ke()}var jc=0;m=ic.prototype;m.id=g("sa");m.Ke=function(){return{}};m.wf=g("m");m.Ja=function(){return{id:this.sa,value:this.wf()}};m.nb=function(a){return"#"==a.substr(-1)?this.sa:null};function kc(a){return new ic(a.id,a.value)}function lc(a){return new ic(jc++,a||{})}function mc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var nc={};q("lf.TransactionType",nc);nc.READ_ONLY=0;nc.READ_WRITE=1;function A(a,b,c,d,e){this.wd=a;this.jg=b;this.Tg=c;this.Qf=d;this.Jf=e}q("lf.TransactionStats",A);A.prototype.Og=g("wd");A.prototype.success=A.prototype.Og;A.prototype.ig=g("jg");A.prototype.insertedRowCount=A.prototype.ig;A.prototype.Sg=g("Tg");A.prototype.updatedRowCount=A.prototype.Sg;A.prototype.Pf=g("Qf");A.prototype.deletedRowCount=A.prototype.Pf;A.prototype.If=g("Jf");A.prototype.changedTableCount=A.prototype.If;function oc(a,b){this.yd=a;this.Ra=b||null;this.S=w();this.wd=!1;this.za=null}oc.prototype.ka=function(){return(0==this.yd?this.sc():pc(this)).then(function(a){this.wd=!0;return a}.bind(this))};function pc(a){try{qc(a.Ra)}catch(b){return cb(b)}return rc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function rc(a){sc(a);tc(a);return a.sc()}
function sc(a){a.Ra.ib.forEach(function(a,c){c=this.Ra.da().get(c);c=this.I(c.getName(),c.kb.bind(c),0);var b=z(a.xa).map(function(a){return a.id()});0<b.length&&c.remove(b).ve(this.Te,this);a=z(a.la).map(function(a){return a[1]}).concat(z(a.wa));c.put(a).ve(this.Te,this)},a)}function tc(a){uc(a.Ra).forEach(function(a){var b=this.I(a.getName(),kc,1);b.remove([]);b.put(a.Ja())},a)}oc.prototype.Te=function(a){this.S.reject(a)};
oc.prototype.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.ib.forEach(function(e){d++;a+=e.wa.size;c+=e.la.size;b+=e.xa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function vc(a){this.Lg=a}vc.prototype.toString=g("Lg");var wc=new vc("backstore"),xc=new vc("cache"),yc=new vc("indexstore"),zc=new vc("engine"),Ac=new vc("runner"),Bc=new vc("observerregistry"),Cc=new vc("schema");function Dc(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ja(a)};function Ec(a){this.l=new Ab;a&&this.addAll(a)}function Fc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=Ec.prototype;m.zc=function(){return this.l.zc()};m.add=function(a){this.l.set(Fc(a),a)};m.addAll=function(a){a=Dc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(Fc(a))};m.clear=function(){this.l.clear()};m.jd=function(){return this.l.jd()};m.contains=function(a){return this.l.Pa(Fc(a))};m.qa=function(){return this.l.qa()};
m.clone=function(){return new Ec(this)};m.pc=function(){return this.l.pc(!1)};function Gc(a){this.Xb=new Ec(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.zc()}})}Gc.prototype.add=function(a){this.Xb.add(a)};Gc.prototype.add=Gc.prototype.add;Gc.prototype.clear=function(){this.Xb.clear()};Gc.prototype.clear=Gc.prototype.clear;Gc.prototype.delete=function(a){return this.Xb.remove(a)};Gc.prototype["delete"]=Gc.prototype.delete;Gc.prototype.forEach=function(a,b){this.Xb.qa().forEach(a,b)};Gc.prototype.has=function(a){return this.Xb.contains(a)};
Gc.prototype.has=Gc.prototype.has;var Hc=fc().vg;function B(a){return Hc?n(a)?new window.Set(a):new window.Set:new Gc(a)}function C(a){if(a instanceof Gc)return a.Xb.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function Ic(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Jc(a,b){this.sa=a;this.m=b||{}}function Kc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Jc.prototype.W=g("sa");function Lc(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Mc(a,b){b.forEach(function(a){delete this.m[a]},a)}Jc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Nc(a){return new Jc(a.id,JSON.parse(a.value))};function Oc(a,b,c){this.Z=a;this.Gb=b;this.pf=c}m=Oc.prototype;m.get=function(a){if(0==a.length)return this.Vd();var b=this.Gb;return Pc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.m[a])})})};function Pc(a,b){var c=y(),d=w();a=Kc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Z.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Nc(a.target.result);c.set(a.W(),a);b()}},this)},a);fb(a).then(function(){d.resolve(c)});return d.ha}
m.Vd=function(){return new u(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Nc(b.value).m,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=y();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.pf(this.Z.name,c));Lc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.pf(this.Z.name,c));Mc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return fb(a)};function Qc(a,b,c){a=a.b(xc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Jc(c);Lc(c,b);return c}
function Rc(a,b){return new Jc(b)};function Sc(a){this.V=a.b(xc);this.C=a.b(yc);this.g=a.b(Cc)}Sc.prototype.update=function(a){a.forEach(function(a){Uc(this,a);Vc(this,a)},this)};function Vc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.la.forEach(function(a){this.V.set(c,a[1])},a)}function Uc(a,b){var c=a.g.table(b.getName());Wc(b).forEach(function(a){Xc(this,c,a)},a)}
function Xc(a,b,c){var d=a.C.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Yc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Yc(a,[c[1],c[0]])},this),h;}},a)}function Yc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.jb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Zc={};q("lf.ConstraintAction",Zc);Zc.RESTRICT=0;Zc.CASCADE=1;var $c={};q("lf.ConstraintTiming",$c);$c.IMMEDIATE=0;$c.DEFERRABLE=1;var ad={};q("lf.Order",ad);ad.DESC=0;ad.ASC=1;var bd={};q("lf.Type",bd);bd.ARRAY_BUFFER=0;bd.BOOLEAN=1;bd.DATE_TIME=2;bd.INTEGER=3;bd.NUMBER=4;bd.STRING=5;bd.OBJECT=6;var cd={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",cd);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function dd(){this.l=y();this.size=0}m=dd.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.be=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return hc(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,C(b))});return a};function ed(a){this.C=a.b(yc);this.g=a.b(Cc);this.V=a.b(xc);this.$c=null}function fd(a,b,c){var d=b.Mb.xg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new D(202,b.j());},this)},a)}function gd(a,b,c,d){b.Mb.Ud.forEach(function(a){a.timing==d&&hd(this,a,c)},a)}function hd(a,b,c){var d=id(a,b);c.forEach(function(a){if(jd(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.Pa(a)))throw new D(203,b.name);},a)}
function id(a,b){null===a.$c&&(a.$c=y());var c=a.$c.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Jc].Ca(),c=a.C.get(c.j()),a.$c.set(b.name,c));return c}function jd(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function kd(a,b,c,d){b=ld(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&md(a,b,c,function(a,b,c){if(b.Pa(c))throw new D(203,a.name);}))}
function nd(a,b,c){b=ld(a.g.info(),b.getName(),1);if(null===b)return null;var d=new dd;md(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ge,b)});return d}function od(a,b,c){var d=new dd;md(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Sd:a,Cg:l[1]})})});return d}function md(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),e=id(this,a);c.forEach(function(c){if(jd(c[0],c[1],e.getName())){var f=c[0].nb(e.getName());d(a,b,f,c)}},this)},a)}
function pd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),gd(a,b,c,d))}function qd(a,b,c,d){0!=c.length&&(gd(a,b,c,d),kd(a,b,c,d))}function rd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),kd(a,b,c,d))}
function sd(a,b,c){var d={ue:[],rf:new dd},e=new dd;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new dd;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=nd(this,b,a);null!==b&&(d.ue.unshift.apply(d.ue,b.keys()),f.be(b))},a);e=f;d.rf.be(e)}while(0<e.size);return d};function td(a){this.wa=y();this.la=y();this.xa=y();this.A=a}m=td.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.la.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.be=function(a){a.wa.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Wc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+hc(this.wa).toString()+"], ["+hc(this.la).toString()+"], ["+hc(this.xa).toString()+"]"};function ud(a){var b=new td(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.jd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size};function vd(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(Cc);this.V=a.b(xc);this.C=a.b(yc);this.Aa=new ed(a);this.gd=new Sc(a);this.ib=y()}function uc(a){var b=[];hc(a.ib).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Da().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=vd.prototype;m.da=g("aa");
m.Ab=function(a,b){wd(this,a);fd(this.Aa,a,b);pd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)xd(this,a,[null,b[c]])};function xd(a,b,c){var d=b.getName(),e=a.ib.get(d)||new td(d);a.ib.set(d,e);try{Xc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){wd(this,a);fd(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);yd(this,a,b);qd(this.Aa,a,b,0);b.forEach(function(b){xd(this,a,b)},this)};m.Wd=function(a,b){wd(this,a);fd(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Mb.sd;if(null===h)f=null;else{f=this.Aa;var h=h.j(),l=d.nb(h);f=f.C.get(h).get(l);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.sa=f,qd(this.Aa,a,[[e,d]],0)):pd(this.Aa,a,[d],0);xd(this,a,[e,d])}};
m.remove=function(a,b){wd(this,a);zd(this,a,b);rd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)xd(this,a,[b[c],null])};function yd(a,b,c){b=ld(a.g.info(),b.getName(),1);if(null!==b){var d=od(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Sd.Ge),d=this.V.get(a),e=c.kb(d.Ja());e.m[b.Sd.vb]=b.Cg.m[b.Sd.Jc];xd(this,c,[d,e])},this)},a)}}
function zd(a,b,c){if(null!==ld(a.g.info(),b.getName(),1)){b=sd(a.Aa,b,c);var d=b.rf;b.ue.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);rd(this.Aa,b,a,0);a.forEach(function(a){xd(this,b,[a,null])},this)},a)}}function qc(a){a.ib.forEach(function(a){var b=this.aa.get(a.getName());pd(this.Aa,b,z(a.wa),1);rd(this.Aa,b,z(a.xa),1);qd(this.Aa,b,z(a.la),1)},a)}m.ka=aa();m.Jb=function(){var a=z(this.ib).map(function(a){return ud(a)});this.gd.update(a)};
function wd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==F?!1:c;this.na=this.o==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.o==F?"unbound":this.o)+(this.na?")":"]")};function Ad(a){if(Bd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.o==F||(c=new E(a.o,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.o,this.from,this.na,this.ea)};
function Cd(a,b){var c=Dd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==F||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function Ed(){return new E(F,F,!1,!1)}function Bd(a){return a.from==F&&a.o==F}function Fd(a){return a.from==a.o&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.o==F||a<this.o||a==this.o&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function Dd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Gd(a,b){var c=Dd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=Dd(a.o,b.o,!1,a.na,b.na));return c}function Hd(a){if(0==a.length)return[];a.sort(Gd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].o,F,!0,!1):new E(a[c-1].o,a[c].from,!0,!0);return b};function Id(a){this.kc=[];n(a)&&this.add(a)}Id.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};Id.prototype.Pa=function(a){return this.kc.some(function(b){return b.contains(a)})};Id.prototype.qa=g("kc");
Id.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(Gd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Cd(c,a[d])){var e=a[d],f=Ed();if(c.from!=F&&e.from!=F){var h=Dd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=F&&e.o!=F&&(h=Dd(c.o,e.o,!1),-1!=h?(f.o=c.o,f.na=0!=h?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function Jd(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){var c;if(Cd(a,b)){c=Ed();var d=Dd(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.o==F||b.o==F?b=a.o==F?b:a:(d=Dd(a.o,b.o,!1),b=0==d?a.na?a:b:-1==d?a:b);c.o=b.o;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Id(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=B(b);this.$a=null}G.prototype.u=function(){return C(this.M)};function Kd(a){return a.entries.map(function(a){return a.va.m})}function Ld(a){return a.entries.map(function(a){return a.va.id()})}function Md(a,b){return a.$a.get(b.j())}var Nd=null;function Od(){null===Nd&&(Nd=new G([],[]));return Nd}
function Pd(a){if(0==a.length)return Od();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].M))}function Qd(a){if(0==a.length)return Od();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].M))}
function Rd(a,b){var c=1<b.length;a=a.map(function(a){return new Sd(a,c)});return new G(a,b)}function Sd(a,b){this.va=a;this.id=Td++;this.Yd=b}var Td=0;function H(a,b){var c=b.Ka;return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.Yd?a.va.m[Ud(b.I())][b.getName()]:a.va.m[b.getName()]}function Vd(a,b,c){var d=b.Ka;if(null!=d)a.va.m[d]=c;else if(a.Yd){var d=Ud(b.I()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Wd(a,b,c,d){function e(a,b){if(a.Yd){a=a.va.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new ic(-1,f);return new Sd(a,!0)};q("lf.bind",function(a){return new Xd(a)});function Xd(a){this.fa=a}q("lf.Binder",Xd);Xd.prototype.Ca=g("fa");function Yd(){this.Ze=Zd();var a=$d();this.Ob=y();this.Ob.set(1,ae());this.Ob.set(2,be());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,ce());this.Ob.set(6,de())}var ee;function fe(){null!=ee||(ee=new Yd);return ee}function ge(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Zd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function ae(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function $d(){var a=ae();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function ce(){var a=$d();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function de(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function be(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var he=[];I.prototype.getParent=g("D");I.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function ie(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||he}function je(a,b){return J(a)[b]||null}function ke(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function le(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return le(this,J(this).indexOf(a))};function me(a,b,c){je(a,c).D=null;b.D=a;a.h[c]=b}function ne(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ne(a,b,c)})};function oe(){I.call(this);this.sa=qe++}r(oe,I);var qe=0;oe.prototype.W=g("sa");function re(a,b,c){oe.call(this);this.J=a;this.value=b;this.F=c;this.vc=ge(fe(),this.J.G(),this.F);this.Wa=!1;this.cc=b}r(re,oe);m=re.prototype;m.Nb=function(){var a=new re(this.J,this.value,this.F);a.cc=this.cc;a.vd(this.Wa);var b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.u=function(a){a=null!=a?a:B();a.add(this.J.I());return a};m.vd=ba("Wa");
function se(a){var b=!1;a.value instanceof Xd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Xd}):!0);if(!b)throw new D(501);}m.eval=function(a){se(this);if("in"==this.F)return te(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.u())};
m.bind=function(a){if(this.cc instanceof Xd){var b=this.cc.Ca();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Xd){var c=b.Ca();if(a.length<=c)throw new D(510);return a[b.Ca()]}return b}))};function te(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.u())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.ld=function(){se(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.we=function(){var a=null;if("between"==this.F)a=new E(ue(this,this.value[0]),ue(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new Id(this.Wa?Hd(a):a);a=ue(this,this.value);a="eq"==this.F?new E(a,a,!1,!1):"gte"==this.F?new E(a,F,!1,!1):"gt"==this.F?new E(a,F,!0,!1):"lte"==this.F?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new Id(this.Wa?Ad(a):[a])};function ue(a,b){return 2==a.J.G()?b.getTime():b};function ve(a){this.ba=a;this.Wc=this.Ga=null}function we(a,b){null===a.Ga&&null!=a.w&&(a.Ga=xe(a.w));return a.Ga.get(b)||null}function xe(a){var b=y();ne(a,function(a){b.set(a.W(),a)});return b}function ye(a,b){b.w&&(a.w=b.w.Nb());a.Wc=b}ve.prototype.bind=function(){return this};function ze(a,b){a=a.w;null!=a&&ne(a,function(a){a instanceof re&&a.bind(b)})};function Ae(a){ve.call(this,a)}r(Ae,ve);function Be(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Ae.prototype.da=function(){return B(this.from)};Ae.prototype.clone=function(){var a=new Ae(this.ba);ye(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ra&&(a.ra=this.ra.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.eb=this.eb;return a};
Ae.prototype.bind=function(a){Ae.hb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);ze(this,a);return this};function Ce(a,b){this.Ha=a;this.aa=b}Ce.prototype.bb=g("Ha");Ce.prototype.da=g("aa");function De(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function Ee(a,b){this.global=a;this.Oa=a.b(wc);this.td=b.map(function(a){return a.context});this.jf=b.map(function(a){return a.je});this.Md=De(this.jf);this.xe=Fe(this);this.Db=w()}function Fe(a){return a.td.some(function(a){return!(a instanceof Ae)})?1:0}m=Ee.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.bb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.xe?void 0:new vd(this.global,this.Md),c=[],d=this.jf.slice(),e=this.td;return a().then(function(){this.ja=this.Oa.Fb(this.xe,C(this.Md),b);return this.ja.ka()}.bind(this)).then(function(){this.ge(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.G=g("xe");m.da=g("Md");m.W=function(){return ka(this)};m.ge=aa();
m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function Ge(a,b){Ee.call(this,a,b);this.Ib=a.b(Bc)}r(Ge,Ee);Ge.prototype.getPriority=k(0);Ge.prototype.ge=function(a){this.td.forEach(function(b,c){He(this.Ib,b,a[c])},this)};function Ie(a,b){this.c=a;this.Ib=a.b(Bc);this.Ia=a.b(Ac);this.gd=new Sc(a);this.ib=b;var c=a.b(Cc);a=this.ib.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Db=w()}m=Ie.prototype;m.exec=function(){this.gd.update(this.ib);this.Mc();return v()};m.G=k(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=k(1);m.Mc=function(){var a=Je(this.Ib,this.aa);0!=a.length&&(a=new Ge(this.c,a),Ke(this.Ia,a))};function Le(a){this.c=a;this.Oa=a.b(wc);this.Ia=a.b(Ac)}Le.prototype.ee=function(a){a=new Ie(this.c,a);Ke(this.Ia,a)};function M(a,b){this.Ua=a;this.i=b;this.Za=y()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("i");M.prototype.dd=function(){throw new D(351);};function Me(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ne(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return Me(this.i,"@rev/R").then(function(a){this.Sa=a;return Me(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Za.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Za.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Ne(d,b)}.bind(this))};
function Oe(a,b,c){var d=a.Za.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return Ne(this.i,a)}.bind(a)):v()}M.prototype.tc=function(a){return Oe(this,a,k(null)).then(function(){this.Za.delete(a);return Ne(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.qc=function(a,b,c){return Oe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.qc;M.prototype.uc=function(a,b){return Oe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Sa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Lc=function(a,b,c){return Oe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Lc;
M.prototype.xb=function(){throw new D(351);};M.prototype.createRow=M.prototype.xb;M.prototype.Cc=g("Ua");M.prototype.getVersion=M.prototype.Cc;M.prototype.ec=function(a){var b=w();a=this.Za.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=hc(this.Za).map(function(b){return this.ec(b).then(function(c){a[b]=c})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Pe(a,b,c){oc.call(this,b,c);this.i=a}r(Pe,oc);Pe.prototype.I=function(a){return this.i.Ac(a)};
Pe.prototype.sc=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var a=this.Ra.ib;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Za.get(e);a.wa.forEach(function(a,e){c[e]={R:b,T:d,P:a.m}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=z(a).map(function(a){return Qe(this.i,a.getName())},this),
fb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Re(){this.Ba=y()}function Se(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Re.prototype.getData=g("Ba");Re.prototype.get=function(a){return v(Se(this,a))};function Te(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Re.prototype.put=function(a){Te(this,a);return v()};function Ue(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Re.prototype.remove=function(a){Ue(this,a);return v()};function Ve(a){return 0==a.Ba.size?0:hc(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function We(a,b){this.g=a;this.Df=b;this.Kc=y();this.Sa=-1;this.M=y();this.Za=y();this.Jd=null}m=We.prototype;
m.Ea=function(a){this.i=this.Df.child(this.g.name());var b=a||function(){return v()};return Me(this.i,"@db/version").then(function(a){return null===a?Ne(this.i,Xe(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Me(this.i,"@rev/R").then(function(a){this.Sa=a;return Me(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Za.set(b,a[b]);a=this.g.oa().map(function(a){return Qe(this,a.getName())},this);
return fb(a)}.bind(this)).then(function(){Ye(this);Ze(this);return v()}.bind(this)):this.he(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.he=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ne(a,{version:this.g.version()},!0)}.bind(this))};
function Ze(a){a.i.off();a.i.on("child_removed",a.zg.bind(a));a.Kd&&(a.Kd.off(),a.Kc.clear());a.Kd=a.i.orderByChild("R").startAt(a.Sa+1);a.Kd.on("value",a.ee.bind(a))}function Ye(a){jc=z(a.M).map(function(a){return Ve(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.zg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=B(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ee=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=$e(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),c=hc(a.xa);0<c.length&&Ue(b,c);var f=z(a.wa);a.la.forEach(function(a){f.push(a[1])});Te(b,f)},this),0<a.length&&this.Gc(a),Ze(this))};
function $e(a,b){var c=B(),d=y();a.Za.forEach(function(a,b){var e=this.M.get(b),f=new td(b);this.Kc.has(a)&&(b=C(this.Kc.get(a)),b.forEach(function(a){c.add(a)}),Se(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.M.get(a.getName()),e=this.g.table(a.getName()).kb({id:b,value:e.P});l.getData().has(b)?a.modify([Se(l,[b])[0],e]):a.add(e)}}}.bind(a));return z(d).filter(function(a){return!a.jd()})}
function Qe(a,b){var c=w(),d=a.Za.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Re,f=[];a.forEach(function(a){f.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});Te(d,f);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Xe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new Re);this.Za.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new Pe(this,a,c)};m.Ac=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Jd");m.Gc=function(a){null!=this.Jd&&this.Jd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Uc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("i");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("ja");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function af(a,b,c,d){return new u(function(a,f){var e;try{var l=this.ja.objectStore(b);e=l.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(l),a())};e.onerror=f},a)}function bf(a){return a instanceof ArrayBuffer?mc(a):a instanceof Date?a.getTime():a}
function cf(a,b,c){function d(a){var b=Nc(a.value),d=b.m,e;for(e in d){var f=kc(d[e]);c(f);d[e]=f.Ja()}a.update(b.Ja())}function e(a){var b=kc(a.value);c(b);a.update(b.Ja())}return af(a,b,a.Uc?d:e,aa())}N.prototype.qc=function(a,b,c){var d=bf(c);return cf(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.uc=function(a,b){return cf(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Lc=function(a,b,c){return cf(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Lc;function df(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Uc){var e=Nc(b.value).m,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=bf(a[c]);return lc(b)};
N.prototype.createRow=N.prototype.xb;N.prototype.Cc=g("Ua");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return df(this,a).then(function(a){return a.map(function(a){return a.value})})};function ef(a,b){this.Z=a;this.Gb=b}ef.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?ff(this):gf(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Z.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Gb(a.target.result))}.bind(this)},this)},this);return fb(a)};
function gf(a){return new u(function(a,c){var b=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Gb(c.value)),c.continue()):a(b)}.bind(this)},a)}function ff(a){return new u(function(a,c){var b;try{b=this.Z.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
ef.prototype.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};ef.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return fb(a)};
ef.prototype.remove=function(a){return new u(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.Z.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function hf(a,b,c,d,e){oc.call(this,c,e);this.c=a;this.ja=b;this.Uc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r(hf,oc);hf.prototype.I=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Oc(a,b,0==c?qa(Qc,this.c):Rc)):new ef(this.ja.objectStore(a),b)};hf.prototype.sc=function(){return this.S.ha};function jf(a,b){this.c=a;this.g=b;this.Gd=b.ke.Sf||!1}m=jf.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){kf(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.qe().then(function(b){jc=Math.max(jc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function kf(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Gd);mf(d);a.g.oa().forEach(qa(a.Lf,d),a);return b(c)}function mf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Lf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Da().forEach(function(b){nf(a,b.j())},this),nf(a,of(b)))};function nf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(pf(b),0==a?"readonly":"readwrite");return new hf(this.c,b,a,this.Gd,c)};
function pf(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(of(a)))});return C(b)}
m.qe=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var l;try{l=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}l.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};l.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Gd?(a=Nc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Ac=function(){throw new D(511);};m.subscribe=aa();m.Gc=aa();function qf(a,b,c){oc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(qf,oc);qf.prototype.I=function(a){return this.Z.Ac(a)};qf.prototype.sc=function(){this.S.resolve();return this.S.ha};function rf(a){this.g=a;this.M=y()}m=rf.prototype;m.Ea=function(){this.g.oa().forEach(this.gg,this);return v()};m.Ac=function(a){var b=this.M.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new qf(this,a,c)};function sf(a,b){if(!a.M.has(b)){var c=new Re;a.M.set(b,c)}}m.gg=function(a){sf(this,a.getName());a.Cb()&&(a.Da().forEach(function(a){sf(this,a.j())},this),sf(this,of(a)))};m.close=aa();m.subscribe=aa();m.Gc=aa();function tf(a){rf.call(this,a);this.pd=null}r(tf,rf);tf.prototype.subscribe=function(a){null===this.pd&&(this.pd=a)};tf.prototype.Gc=function(a){null===this.pd||this.pd(a)};function uf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Gb=c}uf.prototype.get=function(a){var b=this.Gb;return vf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
uf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){vf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};uf.prototype.remove=function(a){vf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function wf(a,b,c){oc.call(this,b,c);this.i=a;this.M=y();this.Nd=[]}r(wf,oc);function xf(a){return a.replace(".","__d__").replace("#","__s__")}wf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new uf(this,xf(a),b),this.M.set(a,c));return c};function vf(a,b,c,d){var e=w();a.Nd.push({Ng:b,Dg:c,transform:d,S:e});return e.ha}
wf.prototype.sc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.S.resolve(f)}0<this.Nd.length?(a=h=this.Nd.shift(),b.executeSql(h.Ng,h.Dg,e,c)):this.S.resolve(d)}.bind(this);0==this.yd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function O(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("i");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function yf(a){return new wf(a.i,1,new vd(a.c,B()))}O.prototype.tc=function(a){var b=yf(this);vf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.tc;
O.prototype.ec=function(a){var b=yf(this);vf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function zf(a,b,c){var d=yf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);vf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.qc=function(a,b,c){var d=bf(c);return zf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.qc;O.prototype.uc=function(a,b){return zf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.uc;O.prototype.Lc=function(a,b,c){return zf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Lc;O.prototype.xb=function(a){var b={},c;for(c in a)b[c]=bf(a[c]);return lc(b)};
O.prototype.createRow=O.prototype.xb;O.prototype.Cc=g("Ua");O.prototype.getVersion=O.prototype.Cc;function Af(a){vf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=yf(this);Af(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Bf(a,b,c){this.c=a;this.g=b;this.Mg=c||1}m=Bf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null!=c)this.i=c,Cf(this,b).then(function(){this.qe().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function Cf(a,b){var c=w(),d=new wf(a.i,1,new vd(a.c,B()));vf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);vf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.he(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new wf(this.i,a,c);throw new D(2);};m.close=aa();
m.Ac=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Gc=function(){throw new D(355);};m.he=function(a,b){return Df(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function Df(a){var b=a.g.oa(),c=new wf(a.i,1,new vd(a.c,B())),d=new wf(a.i,1,new vd(a.c,B()));vf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);Af(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){vf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Cb&&(a.Da().forEach(function(a){a=xf(a.j());e.push(a);l.push(a)}),a=xf(of(a)),e.push(a),p.push(a))});
e.forEach(function(a){vf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.qe=function(){var a=0,b=w(),c=function(b){var c=new wf(this.i,0);vf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});fb(d).then(function(){jc=Math.max(jc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function Ef(a){this.l=y();this.$b=y();a.oa().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=Ef.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.$b.get(a).add(b.id())};m.Wb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function Ff(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.$b.get(a).delete(b)};m.zc=function(a){return null!=a?this.$b.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.$b.clear()};function Gf(a,b,c){var d=0,e=a.length;for(c=c||Hf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Hf(a,b){return a-b}function If(a,b,c){c=Gf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Jf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Kf(){this.ia=0;this.Fc=null}Kf.prototype.add=function(a,b){this.ia+=b;this.Fc=null===this.Fc?a:a>this.Fc?a:this.Fc};Kf.prototype.remove=function(a,b){this.ia-=b};Kf.prototype.clear=function(){this.ia=0};function Lf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Mf(a,b,c,d){this.A=a;this.$=b;this.yf=c;this.za=new Kf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Nf(this,d);this.ua=d=Of(d)}else this.clear()}var Pf=[];m=Mf.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Ab(a,b)};m.set=function(a,b){this.ua=this.ua.Ab(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.Zc=function(a){if(null==a)return this.Y().ia;if(a instanceof E){if(Bd(a))return this.Y().ia;if(Fd(a))return this.get(a.from).length}return this.Va([a]).length};m.Y=g("za");m.Vd=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,te:0},c);return b?c.reverse():c};
m.Va=function(a,b,c,d){var e=Qf(this.ua).a[0];if(!n(e)||0==c)return Pf;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Pf;if(!n(a)||1==a.length&&a[0]instanceof E&&Bd(a[0]))return this.Vd(f,b,c,d);a=this.$.uf(a);var h=Array(b?this.za.ia:f),l={count:0,X:h.length,reverse:b,L:d},p=1<this.jb().Zd();a.forEach(function(a){for(var b=this.$.ud(a),b=this.$.Xd(a)?e:b[0],b=this.ua.Yf(b),c=0;null!=b&&l.count<l.X;){if(p){for(var d=b,f=a,L=l,Db=
h,Tc=d.s.jb(),pe=-1,Na=0;Na<d.a.length;++Na)if(Tc.Bb(d.a[Na],f)){pe=Na;break}if(-1!=pe)for(Na=pe;Na<d.a.length&&L.count<L.X;++Na)Tc.Bb(d.a[Na],f)&&Rf(d,L,Db,Na)}else b.Va(a,l,h);0!=l.L||b.kd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?Jf(h,b,c,d):h};m.clear=function(){this.ua=Sf(this);this.za.clear()};m.Pa=function(a){return this.ua.Pa(a)};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
function Tf(a,b,c){if(!a.$.Od(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.yf?[b.B[c]]:b.B[c]]}m.Hb=function(a){var b;a:{b=Qf(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=Tf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Uf(this.ua);d=c.a.length-1;do if(0>d)c=c.qb,d=0;else{var e=Tf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("yf");m.jb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Qf(this.ua);b;)a.push(new ic(b.sa,[b.a,b.B])),b=b.ya;return a};function Vf(a,b,c,d){a=new Mf(b,a,c);d=Wf(d,a);a.ua=d;return a}function Xf(a,b){this.sa=a;this.s=b;this.mb=0;this.ya=this.qb=this.D=null;this.a=[];this.B=[];this.h=[];this.Yf=1==b.jb().Zd()?this.Pe:this.Oe}function Sf(a){return new Xf(jc++,a)}function P(a){return 0==a.mb}m=Xf.prototype;m.next=g("ya");
function Yf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.qb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.ya&&(a=Yf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Yf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Qf(a){return P(a)?a:Qf(a.h[0])}function Uf(a){return P(a)?a:Uf(a.h[a.h.length-1])}
function Zf(a,b){b&&(b.qb=a);a&&(a.ya=b)}function Nf(a,b){for(var c=b.length,d=0,e=a=Sf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.B=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Sf(a.s),Zf(a,f),a=f)}return e}function $f(a){var b=a[0],c=Sf(b.s);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function Of(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=$f(c);else{var d=c.length,e=0,b=Sf(a.s);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=$f(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Zf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=ag(this,a);if(P(this)){var c=Pf;this.s.Qa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.s.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Pa=function(a){var b=ag(this,a);return this.s.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){bg(this,a,-1,b);return null===this.D?(a=this,1==this.h.length&&(a=this.h[0],a.D=null),a):this};function cg(a){return P(a)?a.a[0]:cg(a.h[0])}function dg(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(cg(a.h[b]))}
function bg(a,b,c,d){var e=ag(a,b),f=P(a);if(!f){var h=a.s.Qa(a.a[e],b)?e+1:e;if(bg(a.h[h],b,h,d))dg(a);else return!1}else if(!a.s.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Qa(a.a[e],b)){if(n(d)&&!a.s.Ma()&&f&&(h=a.B[e],d=Gf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.Ma()?1:a.B[e].length,a.B.splice(e,1),a.s.Y().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.qb&&
256<a.qb.a.length)b=a.qb,d=a.qb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.B:a.h;P(a)?h=b.B:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(dg(b),dg(a));b=!0}b||fg(a,c)}return!0}
function fg(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.qb&&(c=a.qb,d=c.a.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Zf(a.qb,a.ya);P(c)||dg(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Ab=function(a,b,c){var d=ag(this,a);if(P(this)){if(this.s.Qa(this.a[d],a)){if(c)this.s.Y().remove(a,this.s.Ma()?1:this.B[d].length),this.B[d]=this.s.Ma()?b:[b];else{if(this.s.Ma())throw new D(201,this.s.getName(),JSON.stringify(a));if(!If(this.B[d],b))throw new D(109);}this.s.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.s.Ma()?b:[b]);this.s.Y().add(a,1);512==this.a.length?(d=Sf(this.s),a=Sf(this.s),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),
d.B=this.B.splice(256),d.D=a,Zf(d,this.ya),Zf(this,d),d=a):d=this;return d}d=this.s.Qa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?gg(this):this};
function gg(a){var b=Sf(a.s),c=Sf(a.s);b.D=a.D;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Zf(c,a.ya);Zf(a,c);return b}function ag(a,b){for(var c=0,d=a.a.length,e=a.s.jb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Pe=function(a){if(!P(this)){var b=ag(this,a);this.s.Qa(this.a[b],a)&&b++;return this.h[b].Pe(a)}return this};
m.Oe=function(a){if(!P(this)){var b=ag(this,a);this.s.Qa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Oe(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.jb(),f=0,h=this.a.length-1,l=this.a,p=d(e.wb(l[f],a)),L=d(e.wb(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var sa=function(a,b){b=a+b>>1;return b==a?b+1:b},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(l[b],a));if(0==h)return b;if(1==h)return-1;h=sa(b,c);if(h==c)return 0==f?c:-1;var p=d(e.wb(l[h],a));return 0==p?ca(b,h,p):-1==p?ca(h+1,c,f):ca(b+1,h,p)},Cb=function(b,c){if(b>=c)return b;var f=d(e.wb(l[c],a));if(0==f)return c;
if(-1==f)return b;f=sa(b,c);if(f==c)return b;var h=d(e.wb(l[f],a));return 0==h?Cb(f,c):1==h?Cb(b,f-1):-1};0!=p&&(f=ca(f+1,h,L));-1!=f&&(h=Cb(f,h),-1!=h&&h>=f&&hg(this,b,c,f,h+1))}};function Rf(a,b,c,d){if(a.s.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function hg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Rf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.Ma()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--}else if(this.s.Ma())b[a.te++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Wf(a,b){var c=b.Y();a=a.map(function(a){var d=new Xf(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.B[e].length)});return d});for(var d=0;d<a.length-1;++d)Zf(a[d],a[d+1]);return 1<a.length?Of(a[0]):a[0]}m.kd=function(a){return this.s.jb().kd(this.a[0],a)};function ig(a){this.Xc=0==a?jg:kg;this.ce=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ie=0==a?lg:mg}function kg(a,b){return a>b?1:a<b?-1:0}function jg(a,b){return kg(b,a)}function mg(a,b){return Gd(a,b)}function lg(a,b){return Gd(b,a)}m=ig.prototype;m.wb=function(a,b){b=this.ce(b);var c=[b.from==F,b.o==F];if(!c[0]){var d=this.Xc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Xc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Xc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.wb(a,b);return a[0]&&a[1]};m.kd=function(a,b){return this.Bb(a,b)};m.uf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ie(a,c)}.bind(this))};m.Xd=function(a){return this.ce(a).from==F};m.ud=function(a){a=this.ce(a);return[a.from,a.o]};m.Od=function(a){return null!==a};m.Zd=k(1);
m.toString=function(){return this.compare==jg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function ng(a){ig.call(this,a);this.Xc=0==a?og:pg}r(ng,ig);function pg(a,b){return null===a?null===b?0:-1:null===b?1:kg(a,b)}function og(a,b){return pg(b,a)}ng.prototype.Bb=function(a,b){return null===a?Bd(b):ng.hb.Bb.call(this,a,b)};ng.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};ng.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=ng.hb.min.call(this,a,b));return c};
ng.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=ng.hb.max.call(this,a,b));return c};function qg(a){this.pa=a.map(function(a){return new ig(a)})}function rg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=qg.prototype;m.compare=function(a,b){return rg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return rg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return rg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};m.kd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
m.uf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ie(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ie(a[d],b[d]);return c}.bind(this))};m.Xd=function(a){return this.pa[0].Xd(a[0])};
m.ud=function(a){var b=a.map(function(a,b){return this.pa[b].ud(a)[0]},this);a=a.map(function(a,b){return this.pa[b].ud(a)[1]},this);return[b,a]};m.Od=function(a){return a.every(function(a,c){return this.pa[c].Od(a)},this)};m.Zd=function(){return this.pa.length};function sg(a){qg.call(this,a);this.pa=a.map(function(a){return new ng(a)})}r(sg,qg);function tg(a){if(1==a.f.length)return new ig(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.hc()})?new sg(b):new qg(b)};function ug(a){this.fa=a;this.ob=B();this.Oc=new Kf;this.za=new Kf}m=ug.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Oc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Oc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Oc.remove(a,1)):(this.ob.clear(),this.Oc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.ob):this.fa.get(a)};m.Zc=function(a){return this.fa.Zc(a)};
m.Y=function(){Lf(this.za,[this.fa.Y(),this.Oc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(C(this.ob))};m.clear=function(){this.ob.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.ob.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new ic(-2,C(this.ob))].concat(this.fa.Ja())};m.jb=function(){return this.fa.jb()};
function vg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new ug(a);d.forEach(function(a){e.ob.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function wg(a){this.A=a;this.sb=B();this.$=new ig(1)}m=wg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.sb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.sb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
m.Hb=function(a){if(0==this.sb.size)return null;var b=C(this.sb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Zc=function(){return this.sb.size};m.Va=function(a,b,c,d){var e=a||[Ed()];a=C(this.sb).filter(function(a){return e.some(function(b){return this.$.Bb(a,b)},this)},this);return Jf(a,b,c,d)};m.clear=function(){this.sb.clear()};m.Pa=function(a){return this.sb.has(a)};m.Ja=function(){return[new ic(0,C(this.sb))]};m.jb=g("$");
function xg(a,b){var c=new wg(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=k(!0);m.Y=function(){var a=new Kf;a.ia=this.sb.size;return a};function yg(a){this.Oa=a.b(wc);this.C=a.b(yc);this.V=a.b(xc)}yg.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?zg(this,a):Ag(this,a)).then(c)}.bind(this);return c()};function Ag(a,b){var c=a.Oa.Fb(0,[b]);a=c.I(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);Bg(this,b,a)}.bind(a));c.ka();return a}
function Bg(a,b,c){var d=a.C.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function zg(a,b){var c=a.Oa.Fb(0,[b]),d=c.I(b.getName(),b.kb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return Cg(this,a,c)},a).concat(Dg(a,b,c));c.ka();return fb(a.concat(d))}
function Cg(a,b,c){c=c.I(b.j(),kc,1);var d=tg(b);return c.get([]).then(function(a){if(0<a.length){if(Eg(b)){var c=Vf.bind(void 0,d,b.j(),b.Dc);a=vg(c,a)}else a=Vf(d,b.j(),b.Dc,a);this.C.set(b.mc,a)}}.bind(a))}function Dg(a,b,c){return c.I(of(b),kc,1).get([]).then(function(a){0<a.length&&(a=xg(of(b),a),this.C.set(b.getName(),a))}.bind(a))};function Fg(){this.Z=y();this.lc=y()}Fg.prototype.Ea=function(a){a.oa().forEach(function(a){var b=[];this.lc.set(a.getName(),b);var d=of(a);if(null===this.get(d)){var e=new wg(d);b.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var c;c=tg(a);c=new Mf(a.j(),c,a.Dc);c=Eg(a)&&1==a.f.length?new ug(c):c;b.push(c);this.Z.set(a.j(),c)},this)},this);return v()};Fg.prototype.get=function(a){return this.Z.get(a)||null};
Fg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function Gg(a,b){var c=[],d=null,e=null;ne(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function Hg(a){return Ig(a,function(a){return null===a.h})}
function Jg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ke(b,d,c+f)});return{parent:b,children:d}}function Kg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Lg(a){var b=je(a,0);Jg(a);Kg(b,a);return b}
function Mg(a,b,c){var d=je(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Jg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);le(d,h);K(f,e);ke(d,f,h)}});return d}function Ng(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),le(e,a),ke(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function Ig(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Og(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ne(a,function(a){for(var b=0;b<ie(a);b++)d+="-";d+=c(a)});return d};function Pg(a){oe.call(this);this.pb=a;this.Wa=!1}r(Pg,oe);m=Pg.prototype;m.Nb=function(){return Gg(this,function(a){if(a instanceof Pg){var b=new Pg(a.pb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];ne(this,function(a){a!=this&&a.lb(b)}.bind(this));a=B(b);return C(a)};m.u=function(a){var b=null!=a?a:B();ne(this,function(a){a!=this&&a.u(b)}.bind(this));return b};m.vd=function(a){this.Wa!=a&&(this.Wa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Qg(this,b)};function Qg(a,b){return"and"==a.pb?Pd(b):Qd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.we=function(){if("or"==this.pb){var a=new Id;J(this).forEach(function(b){b=b.we().qa();a.add(b)});return a}return new Id};m.ld=function(){return"or"==this.pb?Rg(this):!1};
function Rg(a){var b=null;return J(a).every(function(a){if(!(a instanceof re&&a.ld()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Sg(a,b,c){oe.call(this);this.ga=a;this.ma=b;this.F=c;this.de=null;a=fe();this.vc=ge(a,this.ga.G(),this.F);this.ng=a.Ze.get(this.ga.G())||null}r(Sg,oe);m=Sg.prototype;m.Nb=function(){var a=new Sg(this.ga,this.ma,this.F),b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.u=function(a){a=null!=a?a:B();a.add(this.ga.I());a.add(this.ma.I());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Sg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.vc(b,a)},this);return new G(b,a.u())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Tg(a,b,c){var d;-1!=b.u().indexOf(Ud(a.ga.I()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.vc=ge(fe(),a.ga.G(),a.F)}return[b,d]}return[d,b]}function Ug(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function Vg(a,b,c){null===a.de&&(a.de=Ug(a.ma.I()));var d=new Sd(new ic(-1,a.de),!1);return Wd(b,c,d,[Ud(a.ma.I())])}
function Wg(a,b,c,d){var e=[b,c];d||(e=Tg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new dd,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var sa=e.u(),ca=f.u();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Wd(a,ca,b,sa);L.push(b)}):d&&L.push(Vg(this,a,ca))}.bind(a));a=b.u().concat(c.u());return new G(L,a)}
function Xg(a,b,c,d,e){function f(a,b){b=new Sd(b,1<sa.length);a=Wd(a,ca,b,sa);L.push(a)}var h=d.dg.I(),l=b,p=c;-1!=b.u().indexOf(Ud(h))&&(l=c,p=b);var L=[],sa=p.u(),ca=l.u();l.entries.forEach(function(a){var b=this.ng(H(a,d.wg)),b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):Ff(e,b).forEach(f.bind(null,a)))},a);a=l.u().concat(p.u());return new G(L,a)};function Yg(a,b,c){return null===b?new re(a,b,c):n(b.j)?new Sg(a,b,c):new re(a,b,c)};var Zg={};q("lf.schema.DataStoreType",Zg);Zg.INDEXED_DB=0;Zg.MEMORY=1;Zg.LOCAL_STORAGE=2;Zg.FIREBASE=3;Zg.WEB_SQL=4;Zg.OBSERVABLE_STORE=5;function $g(a,b,c,d){this.mc=a;this.name=b;this.Dc=c;this.f=d}$g.prototype.j=function(){return this.mc+"."+this.name};function Eg(a){return a.f.some(function(a){return a.ba.hc()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.rd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Ud(a){return a.Ka||a.A}Q.prototype.rc=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Ig=this.Ig;return b};Q.prototype.as=Q.prototype.rc;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.lb=g("K");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Ne;Q.prototype.Cb=g("rd");Q.prototype.persistentIndex=Q.prototype.Cb;function of(a){return a.A+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.j()};m.G=function(){return this.child.G()};m.Da=function(){return[]};m.Ca=k(null);m.hc=k(!1);m.rc=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.rc;
function ah(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function bh(a){this.Ka=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=bh.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.I=g("U");m.G=k(4);m.Da=function(){return[]};m.Ca=k(null);m.hc=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function ch(a){return new R(a||new bh,"COUNT")}q("lf.fn.count",ch);function dh(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",dh);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Uf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Uf){case 1:return eh(this,a,b);case 0:return fh(this,a,b);default:return gh(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Pc=function(){return this.toString()};function gh(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function eh(a,b,c){return je(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function fh(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function hh(a){S.call(this,0,1);this.Ce=a}r(hh,S);hh.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.j()}).toString()+")"};hh.prototype.ca=function(a){a.forEach(function(a){ih(new jh(a,this.Ce))},this);return a};function jh(a,b){this.Na=a;this.K=b}
function ih(a){a.K.forEach(function(a){a=ah(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=ah(d).slice(-1)[0],f=d.child instanceof R?Md(this.Na,d.child):this.Na;if(null!==f.$a&&f.$a.has(d.j()))break;f=kh(d.Lb,f,e);e=this.Na;null===e.$a&&(e.$a=y());e.$a.set(d.j(),f)}},a)}
function kh(a,b,c){var d=null;switch(a){case "MIN":d=lh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=lh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=mh(b,c);break;case "COUNT":d=nh(b,c);break;case "SUM":d=oh(b,c);break;case "AVG":a=nh(b,c);0<a&&(d=oh(b,c)/a);break;case "GEOMEAN":d=ph(b,c);break;default:d=qh(b,c)}return d}function lh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function nh(a,b){return b instanceof bh?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function oh(a,b){return lh(a,b,function(a,b){return b+a})}function qh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function ph(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function mh(a,b){var c=y();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(z(c),a.u())};function rh(a,b){this.Ha=a;this.aa=b}rh.prototype.bb=g("Ha");rh.prototype.da=g("aa");function sh(){I.call(this)}r(sh,I);function th(a,b){I.call(this);this.table=a;this.values=b}r(th,sh);function uh(a,b){th.call(this,a,b)}r(uh,th);function vh(a){I.call(this);this.table=a}r(vh,sh);vh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function wh(a){I.call(this);this.table=a}r(wh,sh);wh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function xh(a){I.call(this);this.O=a}r(xh,sh);xh.prototype.toString=function(){return"select("+this.O.toString()+")"};function yh(a){I.call(this);this.table=a}r(yh,sh);yh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function zh(){I.call(this)}r(zh,sh);zh.prototype.toString=k("cross_product");function Ah(a,b){I.call(this);this.f=a;this.Pb=b}r(Ah,sh);
Ah.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Bh(a){I.call(this);this.N=a}r(Bh,sh);Bh.prototype.toString=function(){return"order_by("+Be(this.N)+")"};function Ch(a){I.call(this);this.f=a}r(Ch,sh);Ch.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Dh(a){I.call(this);this.f=a}r(Dh,sh);
Dh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Eh(a){I.call(this);this.X=a}r(Eh,sh);Eh.prototype.toString=function(){return"limit("+this.X+")"};function Fh(a){I.call(this);this.L=a}r(Fh,sh);Fh.prototype.toString=function(){return"skip("+this.L+")"};function Gh(a,b){I.call(this);this.O=a;this.Rb=b}r(Gh,sh);Gh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function Hh(){};function Ih(){}r(Ih,Hh);Ih.prototype.gb=function(a){this.H=a;this.ub(this.H);return this.H};Ih.prototype.ub=function(a){if(a instanceof xh){var b=Jh(this,a.O),b=Kh(this,b);Ng(a,a,b[0],b[1]);a==this.H&&(this.H=b[0]);a=b[0]}J(a).forEach(function(a){this.ub(a)},this)};function Jh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Jh(this,a)},a);return Ea(a)}
function Kh(a,b){var c=null,d=null;b.map(function(a,b){a=new xh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Lh(){}r(Lh,Hh);Lh.prototype.gb=function(a,b){if(3>b.from.length)return a;this.H=a;this.ub(this.H);return this.H};Lh.prototype.ub=function(a){if(a instanceof zh)for(;2<J(a).length;){for(var b=new zh,c=0;2>c;c++){var d=le(a,0);K(b,d)}ke(a,b,0)}J(a).forEach(function(a){this.ub(a)},this)};function Mh(){S.call(this,0,0)}r(Mh,S);Mh.prototype.toString=k("cross_product");Mh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.u(),e=c.u(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Wd(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.u().concat(c.u());return[new G(a,b)]};function Nh(a,b){Ee.call(this,a,b);this.Ia=a.b(Ac);this.Ib=a.b(Bc)}r(Nh,Ee);Nh.prototype.getPriority=k(2);Nh.prototype.ge=function(a){0==this.G()?Oh(this,a):this.Mc()};function Oh(a,b){a.td.forEach(function(a,d){a instanceof Ae&&He(this.Ib,a,b[d])},a)}Nh.prototype.Mc=function(){var a=Je(this.Ib,this.da());0!=a.length&&(a=new Ge(this.global,a),Ke(this.Ia,a))};function Ph(a){ve.call(this,a)}r(Ph,ve);Ph.prototype.da=function(){var a=B();a.add(this.from);Qh(this,this.from.getName(),a);return a};function Qh(a,b,c){var d=Rh(a.ba.info(),b,1);Rh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Qh(this,a.getName(),c)},a)}Ph.prototype.clone=function(){var a=new Ph(this.ba);ye(a,this);a.from=this.from;return a};Ph.prototype.bind=function(a){Ph.hb.bind.call(this,a);ze(this,a);return this};function Sh(a){ve.call(this,a)}r(Sh,ve);Sh.prototype.da=function(){var a=B();a.add(this.La);var b=this.ba.info();Th(this.La.getName(),b.gf).forEach(a.add.bind(a));this.ac&&Rh(b,this.La.getName()).forEach(a.add.bind(a));return a};Sh.prototype.clone=function(){var a=new Sh(this.ba);ye(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Xd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
Sh.prototype.bind=function(a){Sh.hb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Xd?a[this.bc.Ca()]:this.bc.map(function(b){return b instanceof Xd?a[b.Ca()]:b}));return this};function Uh(a){ve.call(this,a)}r(Uh,ve);Uh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.ba.info();Vh(c,b).forEach(a.add.bind(a));Wh(c,b).forEach(a.add.bind(a));return a};Uh.prototype.clone=function(){var a=new Uh(this.ba);ye(a,this);a.table=this.table;a.set=this.set?Xh(this.set):this.set;return a};Uh.prototype.bind=function(a){Uh.hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});ze(this,a);return this};
function Xh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Yh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+mc(b)+"'";default:return"'"+b.toString()+"'"}}function Zh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.La.lb(),c=c+(" INTO "+a.La.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Yh(c.G(),d)});return c+e.join(", ")+");"}).join("\n")}
function $h(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function ai(a,b,c,d){return a instanceof Xd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Yh(c,a)}).join(", ")+")":"between"==b?Yh(c,a[0])+" AND "+Yh(c,a[1]):Yh(c,a).toString()}
function bi(a,b){return J(a).map(function(a){return"("+ci(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function di(a){return[a.ga.j(),$h(a.F),a.ma.j()].join(" ")}function ci(a,b){if(a instanceof re){var c=a.J.j(),d=$h(a.F);a=ai(a.value,a.F,a.J.G(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Pg)return bi(a,b);if(a instanceof Sg)return di(a);throw new D(357,typeof a);}
function ei(a,b){return(a=ci(a,b))?" WHERE "+a:""}function fi(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+Yh(a.J.G(),a.value).toString()}).join(", ");a.w&&(c+=ei(a.w,b));return c+";"}
function gi(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=hi(a,b):(c+=a.from.map(ii).join(", "),a.w&&(c+=ei(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.ra&&(b=a.ra.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function ii(a){return Ud(a)!=a.getName()?a.getName()+" AS "+Ud(a):a.getName()}function hi(a,b){for(var c=Ig(a.w,function(a){return a instanceof Sg}),d=c.map(di),e=ii(a.from[0]),f=1;f<a.from.length;f++)var h=ii(a.from[f]),e=a.eb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=a.w;a=0<J(a).length?je(a,0):a;a instanceof Sg||(e+=" WHERE "+ci(a,b));return e}
function ji(a,b){b=b||!1;a=a.query.clone();if(a instanceof Sh)return Zh(a,b);if(a instanceof Ph){var c="DELETE FROM "+a.from.getName();a.w&&(c+=ei(a.w,b));return c+";"}if(a instanceof Uh)return fi(a,b);if(a instanceof Ae)return gi(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Hg=a.b(zc);this.Ia=a.b(Ac);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return cb(a)}return new u(function(a,b){var c=new Nh(this.global,[this.Bc()]);Ke(this.Ia,c).then(function(b){a(Kd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Wf=function(){var a=function(a){return a.Pc(this.query)+"\n"}.bind(this);return Og(ki(this).bb(),a)};T.prototype.explain=T.prototype.Wf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Pg=function(a){return ji(this,a)};T.prototype.toSql=T.prototype.Pg;T.prototype.ab=aa();function ki(a){if(null==a.hf){var b;b=a.Hg;var c=a.query,d=b.qg.create(c);b=b.Eg.create(d,c);a.hf=b}return a.hf}T.prototype.Bc=function(){return{context:this.query.clone(),je:ki(this)}};function li(a){T.call(this,a,new Ph(a.b(Cc)))}r(li,T);q("lf.query.DeleteBuilder",li);li.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};li.prototype.from=li.prototype.from;li.prototype.w=function(a){this.Fd();this.query.w=a;return this};li.prototype.where=li.prototype.w;li.prototype.Fd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.w)throw new D(516);};
li.prototype.ab=function(){li.hb.ab.call(this);if(null==this.query.from)throw new D(517);};function mi(a,b){T.call(this,a,new Sh(a.b(Cc)));this.query.ac=b||!1}r(mi,T);q("lf.query.InsertBuilder",mi);mi.prototype.ab=function(){mi.hb.ab.call(this);var a=this.query;if(null==a.La||null==a.values)throw new D(518);if(a.ac&&null===a.La.Mb.sd)throw new D(519);};mi.prototype.La=function(a){if(null!=this.query.La)throw new D(520);this.query.La=a;return this};mi.prototype.into=mi.prototype.La;
mi.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Xd||a.some(function(a){return a instanceof Xd})?this.query.bc=a:this.query.values=a;return this};mi.prototype.values=mi.prototype.values;function ni(a){return oi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",ni);q("lf.op.or",function(a){return oi("or",Array.prototype.slice.call(arguments))});function oi(a,b){var c=new Pg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Ae(a.b(Cc)));this.Me=this.Ad=!1;this.query.f=b;pi(this);qi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.hb.ab.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Sb)&&!n(a.X)||n(a.Zb)&&!n(a.L))throw new D(523);null!=this.query.ra?ri(this):si(this)};function pi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ri(a){if(a.query.ra.some(function(a){a=a.G();return 6==a||0==a}))throw new D(525);}function si(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function qi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ti(a.Lb,a.G()))throw new D(527,a.j());},a)}function ui(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Me)throw new D(515);this.Me=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){ui(this,548);if(this.Ad)throw new D(516);this.Ad=!0;vi(this,a);return this};U.prototype.where=U.prototype.w;function vi(a,b){null!=a.query.w&&(b=ni(b,a.query.w));a.query.w=b}
U.prototype.hg=function(a,b){ui(this,542);if(this.Ad)throw new D(547);this.query.from.push(a);vi(this,b);return this};U.prototype.innerJoin=U.prototype.hg;U.prototype.og=function(a,b){ui(this,542);if(!(b instanceof Sg))throw new D(541);if(this.Ad)throw new D(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=B());var c=b;Ud(a)!=Ud(b.ma.I())&&(c=b.reverse());this.query.eb.add(c.W());vi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.og;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new D(528);if(a instanceof Xd)this.query.Sb=a;else{if(0>a)throw new D(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new D(529);if(a instanceof Xd)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){ui(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.ra=function(a){ui(this,549);if(null!=this.query.ra)throw new D(530);null==this.query.ra&&(this.query.ra=[]);this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ra;
function ti(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Wc=null;return a};U.prototype.clone=U.prototype.clone;function wi(a,b){T.call(this,a,new Uh(a.b(Cc)));this.query.table=b}r(wi,T);q("lf.query.UpdateBuilder",wi);wi.prototype.set=function(a,b){a={Tc:b instanceof Xd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};wi.prototype.set=wi.prototype.set;wi.prototype.w=function(a){this.Fd();this.query.w=a;return this};wi.prototype.where=wi.prototype.w;wi.prototype.Fd=function(){if(null!=this.query.w)throw new D(516);};
wi.prototype.ab=function(){wi.hb.ab.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Xd}))throw new D(501);};function xi(a){this.query=a;this.Ha=null}xi.prototype.gc=function(){null===this.Ha&&(this.Ha=this.ad());return this.Ha};function yi(a){xi.call(this,a)}r(yi,xi);yi.prototype.ad=function(){return this.query.ac?new uh(this.query.La,this.query.values):new th(this.query.La,this.query.values)};function zi(a){xi.call(this,a)}r(zi,xi);zi.prototype.ad=function(){var a=new wh(this.query.table),b=null!=this.query.w?new xh(this.query.w.Nb()):null,c=new yh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function Ai(a,b,c){this.Ha=a;this.le=b;this.Vb=c}Ai.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function Bi(a,b){xi.call(this,a);this.Vb=b}r(Bi,xi);Bi.prototype.ad=function(){var a=new vh(this.query.from),b=null!=this.query.w?new xh(this.query.w.Nb()):null,c=new yh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new Ai(a,this.query,this.Vb)).gc()};function Ci(){}r(Ci,Hh);Ci.prototype.gb=function(a,b){if(2>b.from.length)return a;this.H=a;this.ub(this.H,b);return this.H};Ci.prototype.ub=function(a,b){if(a instanceof xh&&a.O instanceof Sg){var c=a.O.W(),d=je(a,0);d instanceof zh&&(c=null!=b.eb&&b.eb.has(c),c=new Gh(a.O,c),Ng(a,d,c,c),a==this.H&&(this.H=c),a=c)}J(a).forEach(function(a){this.ub(a,b)},this)};function Di(){this.Sc=B()}r(Di,Hh);Di.prototype.gb=function(a,b){if(!n(b.w))return a;this.Sc.clear();this.H=a;this.ub(this.H,b);this.Sc.clear();return this.H};Di.prototype.ub=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Sc.has(a)){if(a instanceof xh){var e=a.O.u(),h=function(a){return Ei(this,a,e)}.bind(this),h=Fi(this,b,a,h);this.Sc.add(a);h!=a&&(null===h.getParent()&&(this.H=h),d(h))}c(a)}}.bind(this);d(a)};
function Fi(a,b,c,d){var e=c;if(Gi(b,c))e=Lg(c),Fi(a,b,c,d);else if(Hi(c)){var f=[],e=Mg(c,d,function(a){a=new xh(a.O);f.push(a);return a});f.forEach(function(a){Fi(this,b,a,d)},a)}return e}function Ei(a,b,c){var d=B();Hg(b).forEach(function(a){d.add(a.table)},a);b instanceof yh&&d.add(b.table);return Ic(d,c)}function Hi(a){a=je(a,0);return a instanceof zh||a instanceof Gh}
function Gi(a,b){var c=je(b,0);if(!(c instanceof xh))return!1;if(null==a.eb)return!0;b=b.O instanceof Sg;a=a.eb.has(c.O.W());return b||!a};function Ii(a,b){xi.call(this,a);this.Vb=b;this.kf=this.cf=this.tf=this.ff=this.De=this.Se=this.sf=this.Je=this.vf=null}r(Ii,xi);
Ii.prototype.ad=function(){Ji(this);2<=this.query.from.length&&(this.Je=new zh);this.sf=null!=this.query.w?new xh(this.query.w.Nb()):null;this.query.N&&(this.ff=new Bh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.tf=new Fh(this.query.L));null!=this.query.X&&(this.cf=new Eh(this.query.X));null!=this.query.ra&&(this.Se=new Dh(this.query.ra));Ki(this);this.kf=new Ah(this.query.f||[],this.query.ra||null);var a=Li(this);return(new Ai(a,this.query,this.Vb)).gc()};
function Li(a){for(var b=[a.cf,a.tf,a.kf,a.ff,a.De,a.Se,a.sf,a.Je],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.vf.forEach(function(a){K(b[c],a)});return d}function Ji(a){a.vf=a.query.from.map(function(a){return new yh(a)},a)}function Ki(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.De=new Ch(b))};function Mi(){this.re=[new Ih,new Lh,new Di,new Ci];this.Pd=[new Ih]}Mi.prototype.create=function(a){var b;if(a instanceof Sh)b=new yi(a);else if(a instanceof Ph)b=new Bi(a,this.Pd);else if(a instanceof Ae)b=new Ii(a,this.re);else if(a instanceof Uh)b=new zi(a);else throw new D(513);b=b.gc();return new rh(b,a.da())};function Ni(a){S.call(this,0,1);this.U=a}r(Ni,S);Ni.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ni.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.va});b.remove(this.U,a);return[Od()]};function Oi(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(yc)}r(Oi,S);Oi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Oi.prototype.ca=function(){var a=this.C.get(of(this.table)),b=new G([],[this.table.getName()]),c=ch(),a=a.Y().ia;null===b.$a&&(b.$a=y());b.$a.set(c.j(),a);return[b]};function Pi(a,b){S.call(this,0,-1);this.V=a.b(xc);this.C=a.b(yc);this.table=b}r(Pi,S);Pi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Pi.prototype.ca=function(){var a=this.C.get(of(this.table)).Va();return[Rd(Ff(this.V,a),[Ud(this.table)])]};function Qi(a){this.c=a}r(Qi,Hh);Qi.prototype.gb=function(a,b){this.H=a;if(!this.Hd(b))return a;a=Ig(a,function(a){return a instanceof Pi})[0];b=new Oi(this.c,a.table);Ng(a,a,b,b);return this.H};Qi.prototype.Hd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ra?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof bh):!1};function Ri(a){S.call(this,0,1);this.Re=a}r(Ri,S);Ri.prototype.toString=function(){return"groupBy("+this.Re.map(function(a){return a.j()}).toString()+")"};Ri.prototype.ca=function(a){return Si(this,a[0])};function Si(a,b){var c=new dd,d=function(a){return this.Re.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.u())},a)};function Ti(a,b,c){S.call(this,0,0);this.C=a.b(yc);this.V=a.b(xc);this.O=b;this.Rb=c;this.Dd="eq"==this.O.F?0:2;this.Ue=null}r(Ti,S);var Ui=["hash","index_nested_loop","nested_loop"];Ti.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ui[this.Dd]+", "+this.O.toString()+")"};
Ti.prototype.ca=function(a){switch(this.Dd){case 0:return[Wg(this.O,a[0],a[1],this.Rb)];case 1:return[Xg(this.O,a[0],a[1],this.Ue,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Tg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.u(),h=a.u(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,sa=0;sa<L;){for(var ca=0;ca<l;ca++){var Cb=!1,eg=H(c.entries[ca],b.ga);if(null!==eg)for(var Xi=Math.min(sa+1<<8,p),Db=sa<<8;Db<Xi;Db++)if(b.vc(eg,H(a.entries[Db],b.ma))){var Cb=!0,Tc=Wd(c.entries[ca],
f,a.entries[Db],h);e.push(Tc)}d&&!Cb&&e.push(Vg(b,c.entries[ca],f))}sa++}b=c.u().concat(a.u());return[new G(e,b)]}};function Vi(a,b){a.Dd=1;var c=a.C.get(b.Ca().j());a.Ue={dg:b,wg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Wi(a){S.call(this,0,-1);this.lf=a}r(Wi,S);Wi.prototype.toString=function(){return"no_op_step("+this.lf[0].u().join(",")+")"};Wi.prototype.ca=g("lf");function Yi(){}r(Yi,Hh);Yi.prototype.gb=function(a,b){this.H=a;if(!this.Hd(b))return a;Ig(a,function(a){return a instanceof Ti}).forEach(this.Gg,this);return this.H};Yi.prototype.Hd=function(a){return 1<a.from.length};
Yi.prototype.Gg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Pi))return null;b=Ud(b.table)==Ud(a.O.ma.I())?a.O.ma:a.O.ga;return null===b.Ca()?null:b},c=b(je(a,0)),b=b(je(a,1));if(null!==c||null!==b){b=null===b?c:b;Vi(a,b);var d=new G([],[Ud(b.I())]);me(a,new Wi([d]),b==c?0:1)}}};function Zi(a){a=a.map(function(a){return a.qa()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function $i(a){this.Qb=a}$i.prototype.bd=function(){return 1==this.Qb.f.length?[Ed()]:[this.Qb.f.map(function(){return Ed()})]};function aj(a,b){this.Qb=a;this.Ga=b;this.Ld=this.af=null}
function bj(a,b){var c=y();a.Ga.keys().forEach(function(a){var d=this.Ga.get(a).map(function(a){return we(b,a)},this),f=new Id([Ed()]);d.forEach(function(a){f=Jd(f,a.we())});c.set(a,f)},a);return c}aj.prototype.bd=function(a){if(this.af==a)return this.Ld;for(var b=bj(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Id([Ed()]))}this.Ld=1==this.Qb.f.length?z(b)[0].qa():Zi(cj(this,b));this.af=a;return this.Ld};
function cj(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return hc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function dj(a,b){this.xd=b;this.C=a.b(yc)}function ej(a){a=a.C.get(of(a.xd));return Math.floor(.02*a.Y().ia)}function fj(a,b,c){c=c.filter(a.kg,a);if(0==c.length)return null;a=gj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=hj(c,b);return e<d?(d=e,c):a},null)}
function gj(a,b){return a.xd.Da().map(function(a){a=new ij(this.C,a);jj(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,c=!0,f=0;f<a.cb.f.length;f++){var h=a.Ga.has(a.cb.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}dj.prototype.kg=function(a){return a instanceof re?!a.ld()||a.J.I()!=this.xd||"in"==a.F&&a.value.length>ej(this)?!1:!0:a instanceof Pg?a.ld()&&je(a,0).J.I()==this.xd?J(a).length<=ej(this):!1:!1};
function ij(a,b){this.C=a;this.cb=b;this.eg=B(this.cb.f.map(function(a){return a.ba.getName()}));this.$d=this.Ga=null}function kj(a){null===a.$d&&(a.$d=new aj(a.cb,a.Ga));return a.$d}function jj(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.eg.has(b)&&(null===this.Ga&&(this.Ga=new dd),this.Ga.set(b,a.W()))},a)}function hj(a,b){b=kj(a).bd(b);var c=a.C.get(a.cb.j());return b.reduce(function(a,b){return a+c.Zc(b)},0)};function lj(a,b,c,d){S.call(this,0,-1);this.C=a.b(yc);this.index=b;this.$e=c;this.pe=d;this.Rc=this.Qc=!1}r(lj,S);lj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.pe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};lj.prototype.Pc=function(a){var b=this.toString(),c=this.$e.bd(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.X.toString()));this.Rc&&(b=b.replace("?",a.L.toString()));return b};
lj.prototype.ca=function(a,b,c){a=this.$e.bd(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&Fd(a[0])?Jf(b.get(a[0].from),!1,this.Qc?c.X:void 0,this.Rc?c.L:void 0):b.Va(a,this.pe,this.Qc?c.X:void 0,this.Rc?c.L:void 0)).map(function(a){return new ic(a,{})},this);return[Rd(c,[this.index.mc])]};function mj(){S.call(this,0,0)}r(mj,S);mj.prototype.toString=k("multi_index_range_scan()");
mj.prototype.ca=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=z(b);return[new G(c,a[0].u())]};function nj(a){S.call(this,0,1);this.jc=a}r(nj,S);nj.prototype.toString=k("select(?)");nj.prototype.Pc=function(a){a=we(a,this.jc);return this.toString().replace("?",a.toString())};nj.prototype.ca=function(a,b,c){return[we(c,this.jc).eval(a[0])]};function oj(a,b){S.call(this,0,1);this.V=a.b(xc);this.U=b}r(oj,S);oj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};oj.prototype.ca=function(a){return[Rd(Ff(this.V,Ld(a[0])),[Ud(this.U)])]};function pj(a){this.c=a}r(pj,Hh);pj.prototype.gb=function(a,b){this.H=a;Ig(a,function(a){return a instanceof Pi}).forEach(function(a){var c=qj(a);if(0!=c.length){var e=fj(new dj(this.c,a.table),b,c.map(function(a){return we(b,a.jc)}));if(null!==e){var f=y();c.forEach(function(a){f.set(a.jc,a)},this);this.H=rj(this,e,f,a)}}},this);return this.H};function qj(a){var b=[];for(a=a.getParent();a;){if(a instanceof nj)b.push(a);else if(a instanceof Ti)break;a=a.getParent()}return b}
function rj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(Jg);b=new lj(a.c,b.cb,kj(b),!1);a=new oj(a.c,d.table);K(a,b);Ng(d,d,a,b);return b.bb()};function sj(a,b){S.call(this,0,-1);this.C=a.b(yc);this.U=b}r(sj,S);sj.prototype.toString=function(){return"insert("+this.U.getName()+")"};sj.prototype.ca=function(a,b,c){tj(this.U,c.values,this.C);b.Ab(this.U,c.values);return[Rd(c.values,[this.U.getName()])]};function tj(a,b,c){a=a.Mb.sd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).Y().Fc;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function uj(a,b){S.call(this,0,-1);this.C=a.b(yc);this.U=b}r(uj,S);uj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};uj.prototype.ca=function(a,b,c){tj(this.U,c.values,this.C);b.Wd(this.U,c.values);return[Rd(c.values,[this.U.getName()])]};function vj(){S.call(this,0,1)}r(vj,S);vj.prototype.toString=k("limit(?)");vj.prototype.Pc=function(a){return this.toString().replace("?",a.X.toString())};vj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function wj(a){S.call(this,0,1);this.N=a}r(wj,S);m=wj.prototype;m.toString=function(){return"order_by("+Be(this.N)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=dh(this.N[d].J);if(null!==b.$a&&b.$a.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Md(a[0],b)).entries.sort(this.Tf.bind(this))}else a.sort(this.Jg.bind(this));return a};
m.$=function(a,b){var c,d,e,f=-1;do f++,e=this.N[f].J,c=this.N[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Jg=function(a,b){return this.$(function(b){return b instanceof R?Md(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Md(b,a):H(b.entries[b.entries.length-1],a)})};m.Tf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function xj(a,b){this.Na=a;this.K=b}function yj(a){return a.K.some(function(a){return a instanceof R},a)?zj(a):Aj(a)}function zj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Md(a.Na,a.K[0]).entries.map(function(a){var b=new Sd(new ic(-1,{}),1<this.Na.M.size);Vd(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Sd(new ic(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var c=a instanceof R?Md(this.Na,a):H(this.Na.entries[0],a);Vd(b,a,c)},a);return new G([b],a.Na.u())}
function Aj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Sd(new ic(a.va.id(),{}),c);this.K.forEach(function(c){Vd(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.u())}function Bj(a,b){var c=a.map(function(a){return yj(new xj(a,b)).entries[0]});return new G(c,a[0].u())};function Cj(a,b){S.call(this,0,1);this.f=a;this.Pb=b}r(Cj,S);Cj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Cj.prototype.ca=function(a){0==a.length?a=[Od()]:1==a.length?(a=a[0],a=[0==this.f.length?a:yj(new xj(a,this.f))]):a=[Bj(a,this.f)];return a};function Dj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function Ej(){S.call(this,0,1)}r(Ej,S);Ej.prototype.toString=k("skip(?)");Ej.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};Ej.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].u())]};function Fj(){}r(Fj,Hh);Fj.prototype.gb=function(a,b){if(!n(b.X)&&!n(b.L))return a;var c=Gj(a);if(null===c)return a;Ig(a,function(a){return a instanceof vj||a instanceof Ej}).forEach(function(a){a instanceof vj?c.Qc=!0:c.Rc=!0;Jg(a)},this);return c.bb()};function Gj(a){a=Ig(a,function(a){return a instanceof lj},function(a){return a instanceof Cj&&Dj(a)||a instanceof wj||1!=J(a).length||a instanceof nj});return 0<a.length?a[0]:null};function Hj(a){this.c=a}r(Hj,Hh);Hj.prototype.gb=function(a,b){this.H=a;var c=Ij(this,b);if(0==c.length)return this.H;var d,e=0;do d=c[e++],a=Jj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.H;b=Kj(this,a[0].cb.mc);return null===b?this.H:this.H=Lj(this,d,b,a)};function Ij(a,b){return Ig(a.H,function(a){if(!(a instanceof nj))return!1;a=we(b,a.jc);return a instanceof Pg&&"or"==a.pb})}function Kj(a,b){return Ig(a.H,function(a){return a instanceof Pi&&a.table.getName()==b})[0]||null}
function Jj(a,b,c){b=we(c,b.jc);var d=b.u();if(1!=d.size)return null;var d=C(d)[0],e=new dj(a.c,d),f=null;return J(b).every(function(a){a=fj(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Lj(a,b,c,d){var e=new oj(a.c,c.table),f=new mj;K(e,f);d.forEach(function(a){a=new lj(this.c,a.cb,kj(a),!1);K(f,a)},a);Jg(b);Ng(c,c,e,f);return f.bb()};function Mj(a){this.c=a}r(Mj,Hh);Mj.prototype.gb=function(a,b){b=Nj(a,b);if(null===b)return a;a:{var c=b;a=Oj(je(b,0));if(null!==a){var d;d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Pj(f[h],d);d=e;if(null===d){a=c;break a}c=new lj(this.c,d.cb,new $i(d.cb),d.Xe);d=new oj(this.c,a.table);K(d,c);Jg(b);c=Ng(a,a,d,c)}a=c}a==b&&(a=b,c=Qj(je(b,0)),null!==c&&(d=Pj(c.index,b.N),null!==d&&(c.pe=d.Xe,a=Jg(b).parent)));return a.bb()};
function Qj(a){a=Ig(a,function(a){return a instanceof lj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Oj(a){a=Ig(a,function(a){return a instanceof Pi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Nj(a,b){return n(b.N)?Ig(a,function(a){return a instanceof wj})[0]:null}function Pj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].ba.getName()}))return null;b=Rj(b,a);return b[0]||b[1]?{cb:a,Xe:b[1]}:null}
function Rj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Sj(a,b,c){this.Ha=a;this.le=b;this.Vb=c}Sj.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function Tj(a){S.call(this,0,1);this.U=a}r(Tj,S);Tj.prototype.toString=function(){return"update("+this.U.getName()+")"};Tj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.kb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Od()]};function Uj(a){this.c=a;this.re=[new Yi,new pj(this.c),new Hj(this.c),new Mj(this.c),new Fj,new Qi(this.c)];this.Pd=[new pj(this.c)]}Uj.prototype.create=function(a,b){var c=a.bb();if(c instanceof uh||c instanceof th)return Vj(this,a,b);if(c instanceof Ah||c instanceof Eh||c instanceof Fh)return Vj(this,a,b,this.re);if(c instanceof vh||c instanceof wh)return Vj(this,a,b,this.Pd);throw new D(8);};
function Vj(a,b,c,d){a=Gg(b.bb(),a.tg.bind(a));null!=d&&(a=(new Sj(a,c,d)).gc());return new Ce(a,b.da())}
Uj.prototype.tg=function(a){if(a instanceof Ah)return new Cj(a.f,a.Pb);if(a instanceof Dh)return new Ri(a.f);if(a instanceof Ch)return new hh(a.f);if(a instanceof Bh)return new wj(a.N);if(a instanceof Fh)return new Ej;if(a instanceof Eh)return new vj;if(a instanceof xh)return new nj(a.O.W());if(a instanceof zh)return new Mh;if(a instanceof Gh)return new Ti(this.c,a.O,a.Rb);if(a instanceof yh)return new Pi(this.c,a.table);if(a instanceof vh)return new Ni(a.table);if(a instanceof wh)return new Tj(a.table);
if(a instanceof uh)return new uj(this.c,a.table);if(a instanceof th)return new sj(this.c,a.table);throw new D(514);};function Wj(a){this.qg=new Mi;this.Eg=new Uj(a)};function Xj(){this.df=y()}function Yj(a,b){var c=a.df.get(b.getName())||null;null===c&&(c=new Zj,a.df.set(b.getName(),c));return c}function ak(a,b,c,d){c.forEach(function(a){a=Yj(this,a);0==d?(a.fb=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ya&&(a.Ya=B()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=B()),a.Ya.add(b)):2==d&&(a.fb=b)},a)}
function bk(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Yj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.fb&&a.fb==b:3==d?null===a.wc&&null===a.fb&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function ck(a,b,c,d){var e=bk(a,b,c,d);e&&ak(a,b,c,d);return e}Xj.prototype.releaseLock=function(a,b){b.forEach(function(b){Yj(this,b).releaseLock(a)},this)};
function dk(a,b){b.forEach(function(a){Yj(this,a).fb=null},a)}function Zj(){this.Yb=this.Ya=this.fb=this.wc=null}Zj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.fb==a&&(this.fb=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function ek(){this.Ub=new fk;this.Ec=new Xj}function Ke(a,b){(2>b.getPriority()||2>b.getPriority())&&dk(a.Ec,b.da());a.Ub.Ab(b);gk(a);return b.Db.ha}function gk(a){for(var b=a.Ub.qa(),c=0;c<b.length;c++){var d=b[c];if(0==d.G()?hk(a,d,1,3):hk(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Bg.bind(e,d),e.Ag.bind(e,d))}}}function hk(a,b,c,d){var e=!1;ck(a.Ec,b.W(),b.da(),c)&&(e=ck(a.Ec,b.W(),b.da(),d));return e}ek.prototype.Bg=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.resolve(b);gk(this)};
ek.prototype.Ag=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.reject(b);gk(this)};function fk(){this.Ub=[]}fk.prototype.Ab=function(a){If(this.Ub,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.W()-c.W():b})};fk.prototype.qa=function(){return this.Ub.slice()};fk.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function ik(){this.Nc=y()}var jk;function kk(){jk||(jk=new ik);return jk}ik.prototype.clear=function(){this.Nc.clear()};ik.prototype.clear=ik.prototype.clear;ik.prototype.rb=function(a,b){this.Nc.set(a.toString(),b);return b};ik.prototype.registerService=ik.prototype.rb;ik.prototype.b=function(a){var b=this.Nc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};ik.prototype.getService=ik.prototype.b;ik.prototype.md=function(a){return this.Nc.has(a.toString())};
ik.prototype.isRegistered=ik.prototype.md;function lk(){var a=kk();return hc(a.Nc)};function mk(a,b,c,d){return null!=a?null!=b?nk(a,b,c,d):ok(a):pk()}function qk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function rk(a){var b=kk();a=new vc("ns_"+a);return b.md(a)?b.b(a):null}function pk(){var a={};lk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=rk(b).b(Cc).version())});return qk(a)}function ok(a){a=rk(a);var b={};if(null!=a){var c=a.b(yc);a.b(Cc).oa().forEach(function(a){b[a.getName()]=c.get(of(a)).Y().ia})}return qk(b)}
function nk(a,b,c,d){var e=rk(a);a=[];if(null!=e){var f=null;try{f=e.b(Cc).table(b)}catch(h){}null!=f&&(b=e.b(yc),e=e.b(xc),c=b.get(of(f)).Va(void 0,!1,c,d),c.length&&(a=Ff(e,c).map(function(a){return a.m})))}return qk(a)};function sk(a,b){this.Qd=fe();this.me=a;this.od=b;this.K=tk(this)}function tk(a){if(0<a.me.f.length)return a.me.f;var b=[];a.me.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}sk.prototype.$=function(a,b){return this.K.every(function(c){return 6==c.G()||0==c.G()?H(a,c)===H(b,c):ge(this.Qd,c.G(),"eq")(H(a,c),H(b,c))},this)};
function uk(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.od.splice(f,1),l=vk(h,l,0,a.od),b.push(l))}e=qb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.od.splice(h,0,l.va.m),l=vk(h,[],1,a.od),b.push(l));return b}function vk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function wk(){this.fc=y()}wk.prototype.Cd=function(a,b){var c=ka(a.query).toString(),d=this.fc.get(c)||null;null===d&&(d=new xk(a),this.fc.set(c,d));d.Cd(b)};wk.prototype.ne=function(a,b){a=ka(a.query).toString();var c=this.fc.get(a)||null;c.ne(b);0<c.Hc.size||this.fc.delete(a)};function Je(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Bc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function He(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.fc.get(b)||null;null!==a&&yk(a,c)}function xk(a){this.Hf=a;this.Hc=B();this.yg=[];this.bf=null;this.Rf=new sk(a.query,this.yg)}xk.prototype.Cd=function(a){this.Hc.has(a)||this.Hc.add(a)};xk.prototype.ne=function(a){return this.Hc.delete(a)};xk.prototype.Bc=function(){var a=this.Hf;return{context:a.query,je:ki(a)}};function yk(a,b){var c=uk(a.Rf,a.bf,b);a.bf=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function zk(a,b){var c=a.b(Cc),d=b||{};b=new Ef(c);a.rb(xc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=fc(),b=b.fg?0:b.Ug?4:1);switch(b){case 0:b=new jf(a,c);break;case 1:b=new rf(c);break;case 5:b=new tf(c);break;case 4:b=new Bf(a,c,d.webSqlDbSize);break;case 3:b=new We(c,d.firebase);e=!0;break;default:throw new D(300);}a.rb(wc,b);var f=new Fg;a.rb(yc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Wj(a);a.rb(zc,b);b=new ek;a.rb(Ac,b);b=new wk;a.rb(Bc,b);return f.Ea(c)}).then(function(){if(e){var b=
new Le(a);b.Oa.subscribe(b.ee.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=mk);return(new yg(a)).Ea(c)})};function Ak(a){this.c=a;this.g=a.b(Cc);this.aa=B(this.g.oa());this.Db=w()}function Bk(a){var b=a.c.b(yc),c=a.c.b(xc),d={};a.g.oa().forEach(function(a){var e=b.get(of(a)).Va(),e=Ff(c,e).map(function(a){return a.m});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=Ak.prototype;m.exec=function(){var a=Bk(this),a=new Sd(new ic(-1,a),!0);return v([new G([a],[])])};m.G=k(0);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=k(0);function Ck(a,b){this.c=a;this.g=a.b(Cc);this.aa=B(this.g.oa());this.Db=w();this.Ba=b;this.Oa=a.b(wc);this.V=a.b(xc);this.C=a.b(yc)}m=Ck.prototype;
m.exec=function(){if(!(this.Oa instanceof jf||this.Oa instanceof rf||this.Oa instanceof Bf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.C.get(of(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new D(111);if(null==this.Ba.tables)throw new D(112);return Dk(this)};m.G=k(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=k(0);
function Dk(a){var b=new vd(a.c,a.aa),b=a.Oa.Fb(a.G(),C(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.xb(a)}),f=b.I(c,d.kb,0);a.V.Wb(c,e);var h=a.C.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function Ek(a,b){this.c=a;this.Oa=a.b(wc);this.Ia=a.b(Ac);this.Ib=a.b(Bc);this.aa=B(b);this.Ra=new vd(this.c,this.aa);this.Db=w();this.xc=w();this.ze=w()}m=Ek.prototype;m.exec=function(){this.ze.resolve();return this.xc.ha};m.G=k(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=k(2);function Fk(a){Ke(a.Ia,a);return a.ze.ha}
function Gk(a,b){b=b.Bc();return b.je.bb().exec(a.Ra,b.context).then(function(a){return Kd(a[0])},function(a){this.Ra.Jb();var b=new kb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Fb(this.G(),C(this.aa),this.Ra);this.ja.ka().then(function(){this.Mc();this.xc.resolve()}.bind(this),function(a){this.Ra.Jb();this.xc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Ra.Jb();this.xc.resolve();return this.Db.ha};
m.Mc=function(){var a=Je(this.Ib,this.aa);0!=a.length&&(a=new Ge(this.c,a),Ke(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(Ac);this.Kb=null;this.Ta=0;0==Hk.size&&(Hk.set(0,B([1,4])),Hk.set(1,B([2])),Hk.set(2,B([3,5,6])),Hk.set(3,B([2,7])),Hk.set(4,B([7])),Hk.set(5,B([7])),Hk.set(6,B([7])))}q("lf.proc.Transaction",V);var Hk=y();function Ik(a,b){var c=Hk.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){Ik(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.Bc())},this)}catch(c){return Ik(this,7),cb(c)}this.Kb=new Nh(this.c,b);return Ke(this.Ia,this.Kb).then(function(a){Ik(this,7);return a.map(function(a){return Kd(a)})}.bind(this),function(a){Ik(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ff=function(a){Ik(this,1);this.Kb=new Ek(this.c,a);return Fk(this.Kb).then(function(){Ik(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ff;
V.prototype.Ef=function(a){Ik(this,3);try{a.ab()}catch(b){return Ik(this,7),cb(b)}return Gk(this.Kb,a).then(function(a){Ik(this,2);return a}.bind(this),function(a){Ik(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Ef;V.prototype.ka=function(){Ik(this,5);return this.Kb.ka().then(function(){Ik(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){Ik(this,6);return this.Kb.Jb().then(function(){Ik(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.Y=function(){if(7!=this.Ta)throw new D(105);return this.Kb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(Cc);this.hd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.rb(Cc,this.g);return zk(this.c,a).then(function(){this.hd=!0;this.Ia=this.c.b(Ac);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.zb=g("g");W.prototype.getSchema=W.prototype.zb;function Jk(a){if(!a.hd)throw new D(2);}W.prototype.select=function(a){Jk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){Jk(this);return new mi(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Wd=function(){Jk(this);return new mi(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Wd;W.prototype.update=function(a){Jk(this);return new wi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Jk(this);return new li(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Jk(this);this.c.b(Bc).Cd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Jk(this);this.c.b(Bc).ne(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Nf=function(){Jk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Nf;W.prototype.close=function(){try{this.c.b(wc).close()}catch(a){}this.c.clear();this.hd=!1};W.prototype.close=W.prototype.close;
W.prototype.Xf=function(){Jk(this);var a=new Ak(this.c);return Ke(this.Ia,a).then(function(a){return Kd(a[0])[0]})};W.prototype["export"]=W.prototype.Xf;W.prototype.import=function(a){Jk(this);a=new Ck(this.c,a);return Ke(this.Ia,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Ye=c;this.We=d;this.xf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Ud(this.U)+"."+this.A};m.toString=function(){return this.j()};m.I=g("U");m.G=g("xf");X.prototype.getType=X.prototype.G;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.I().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!n(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.hc=g("We");X.prototype.isNullable=X.prototype.hc;X.prototype.Dc=g("Ye");X.prototype.Qa=function(a){return Yg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.ef=function(a){return Yg(this,a,"neq")};X.prototype.neq=X.prototype.ef;X.prototype.rg=function(a){return Yg(this,a,"lt")};
X.prototype.lt=X.prototype.rg;X.prototype.sg=function(a){return Yg(this,a,"lte")};X.prototype.lte=X.prototype.sg;X.prototype.ag=function(a){return Yg(this,a,"gt")};X.prototype.gt=X.prototype.ag;X.prototype.bg=function(a){return Yg(this,a,"gte")};X.prototype.gte=X.prototype.bg;X.prototype.match=function(a){return Yg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Gf=function(a,b){return Yg(this,[a,b],"between")};X.prototype.between=X.prototype.Gf;
X.prototype.cg=function(a){return Yg(this,a,"in")};X.prototype["in"]=X.prototype.cg;X.prototype.mg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.mg;X.prototype.lg=function(){return this.ef(null)};X.prototype.isNotNull=X.prototype.lg;X.prototype.rc=function(a){return new X(this.U,this.A,this.Ye,this.We,this.xf,a)};X.prototype.as=X.prototype.rc;function Kk(a){this.g=a;this.Id=new dd;this.oe=new dd;this.gf=new dd;this.Ie=y();this.h=new dd;this.Ee=new dd;this.mf=new dd;this.He=new dd;Lk(this)}function Lk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Mb.Ud.forEach(function(c){this.gf.set(b,this.g.table(c.Xa));this.h.set(c.Xa,a);0==c.action?(this.oe.set(c.Xa,c),this.mf.set(c.Xa,a)):(this.Id.set(c.Xa,c),this.Ee.set(c.Xa,a));this.Ie.set(a.getName()+"."+c.vb,c.Xa);this.He.set(c.Xa+"."+c.Jc,a.getName())},this)},a)}
function ld(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.oe.get(b);c=a.Id.get(b);a=a.oe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Th(a,b){a=b.get(a);return null===a?[]:a}function Vh(a,b){var c=B();b.forEach(function(a){(a=this.Ie.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Rh(a,b,c){return null!=c?0==c?Th(b,a.mf):Th(b,a.Ee):Th(b,a.h)}
function Wh(a,b){var c=B();b.forEach(function(a){(a=this.He.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Mk(a,b,c){this.sd=a;this.xg=b;this.Ud=c}q("lf.schema.Constraint",Mk);Mk.prototype.$f=g("sd");Mk.prototype.getPrimaryKey=Mk.prototype.$f;Mk.prototype.Zf=g("Ud");Mk.prototype.getForeignKeys=Mk.prototype.Zf;function Nk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ge=b;this.vb=a.local;this.Xa=d[0];this.Jc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Ok(a);this.Qd=fe();this.A=a;this.K=y();this.zd=B();this.nc=B();this.nd=B();this.Fa=null;this.ta=y();this.rd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Pk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Qk=B([0,6]);function Ok(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Rk(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ta.has(b)||a.nc.has(b))throw new D(503,a.A+"."+b);}
function Sk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Tk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new D(543,a.yb[c].name);}}
function Uk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.A+"."+e);},a)}}function Vk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.nd.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.zf=function(a,b){Ok(a);Rk(this,a);this.K.set(a,b);Qk.has(b)&&this.Be([a]);return this};Y.prototype.addColumn=Y.prototype.zf;
Y.prototype.Bf=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Ok(this.Fa);Rk(this,this.Fa);a=Wk(this,a,!0,void 0,b);Sk(this,a);1==a.length&&this.zd.add(a[0].name);this.nc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Bf;
Y.prototype.Af=function(a,b){Ok(a);Rk(this,a);b=new Nk(b,this.A,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.K.has(b.vb))throw new D(540,a);this.yb.push(b);this.Ae(a,[b.vb],this.zd.has(b.vb));return this};Y.prototype.addForeignKey=Y.prototype.Af;Y.prototype.Cf=function(a,b){Ok(a);Rk(this,a);b=Wk(this,b,!0);1==b.length&&(this.zd.add(b[0].name),Xk(this,b[0].name));this.ta.set(a,b);this.nc.add(a);return this};Y.prototype.addUnique=Y.prototype.Cf;
function Xk(a,b){a.yb.forEach(function(a){a.vb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.Be=function(a){Wk(this,a,!1).forEach(function(a){this.nd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Be;Y.prototype.Ae=function(a,b,c,d){Ok(a);Rk(this,a);b=Wk(this,b,!0,d);c&&this.nc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.Ae;Y.prototype.Cb=ba("rd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.zb=function(){Tk(this);Uk(this);Vk(this);return new (Yk(this))};Y.prototype.getSchema=Y.prototype.zb;function Wk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Pk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Pk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function Yk(a){function b(){function b(b){return a.ta.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=hc(a.K).map(function(b){this[b]=new X(this,b,a.zd.has(b),a.nd.has(b),a.K.get(b));return this[b]},this),e=hc(a.ta).map(function(c){return new $g(a.A,c,a.nc.has(c),b.call(this,c))},this);Q.call(this,a.A,d,e,a.rd);var f=null===a.Fa?null:new $g(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.nd.has(b.getName())});this.Mb=new Mk(f,
h,a.yb);this.qf=Zk(a,d,e)}r(b,Q);b.prototype.xb=function(a){return new this.qf(jc++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(c){var d=c.getName();c=c.G();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.qf(a.id,b)};
b.prototype.deserializeRow=b.prototype.kb;b.prototype.Ne=g("Mb");b.prototype.getConstraint=b.prototype.Ne;return b}
function Zk(a,b,c){function d(a,d){this.K=b;this.ta=c;ic.call(this,a,d)}r(d,ic);d.prototype.Ke=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.hc()?null:cd[b.G()]});return a};d.prototype.wf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.G();var d=this.m[c];a[c]=0==b?null!=d?mc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Qd.Ze.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function $k(a,b){this.g=new Z(a,b);this.tb=y();this.yc=!1;this.i=null;this.Yc=!1}q("lf.schema.Builder",$k);function al(a,b){b.yb.forEach(function(a){var c=a.Xa;if(!this.tb.has(c))throw new D(536,a.name);var c=this.tb.get(c).zb(),e=a.Jc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.zb()[a.vb].G()!=c[e].G())throw new D(538,a.name);if(!c[e].Dc())throw new D(539,a.name);},a)}
$k.prototype.Kf=function(a){a.yb.forEach(function(a){this.tb.get(a.Xa).yb.forEach(function(b){if(b.vb==a.Jc)throw new D(534,a.name);},this)},this)};function bl(a){a.yc||(a.tb.forEach(function(a){al(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),z(a.tb).forEach(a.Kf,a),cl(a),a.tb.clear(),a.yc=!0)}function dl(a,b,c){b.ye||(b.ye=!0,b.fe=!0,b.Le.forEach(function(a){a=c.get(a);if(!a.ye)dl(this,a,c);else if(a.fe&&b!=a)throw new D(533);},a));b.fe=!1}
function cl(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new el(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Le.add(d)})});z(b).forEach(function(a){dl(this,a,b)},a)}function el(a){this.fe=this.ye=!1;this.Le=B();this.mc=a}$k.prototype.zb=function(){this.yc||bl(this);return this.g};$k.prototype.getSchema=$k.prototype.zb;$k.prototype.Qe=function(){var a=new vc("ns_"+this.g.name()),b=kk(),c;b.md(a)?c=b.b(a):(c=new ik,b.rb(a,c));return c};$k.prototype.getGlobal=$k.prototype.Qe;
$k.prototype.connect=function(a){if(this.Yc||null!==this.i&&this.i.hd)throw new D(113);this.Yc=!0;if(null===this.i){var b=this.Qe();b.md(Cc)||b.rb(Cc,this.zb());this.i=new W(b)}return this.i.Ea(a).then(function(a){this.Yc=!1;return a}.bind(this),function(a){this.Yc=!1;throw a;}.bind(this))};$k.prototype.connect=$k.prototype.connect;$k.prototype.Mf=function(a){if(this.tb.has(a))throw new D(503,a);if(this.yc)throw new D(535);this.tb.set(a,new Y(a));return this.tb.get(a)};$k.prototype.createTable=$k.prototype.Mf;
$k.prototype.se=function(a){if(this.yc)throw new D(535);this.g.se(a);return this};$k.prototype.setPragma=$k.prototype.se;function Z(a,b){this.A=a;this.Ua=b;this.M=y();this.ke={Sf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return z(this.M)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.M.has(a))throw new D(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ve||(this.Ve=new Kk(this));return this.Ve};Z.prototype.Fg=g("ke");Z.prototype.pragma=Z.prototype.Fg;Z.prototype.se=ba("ke");q("lf.schema.create",function(a,b){return new $k(a,b)});u.prototype.catch=u.prototype.ve;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
